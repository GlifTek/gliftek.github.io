'use strict';(function(){var LIST_NONE="<none>",_pGlob={};_pGlob.objCache={},_pGlob.fadeAnnotations=!0,_pGlob.pickedObject="",_pGlob.hoveredObject="",_pGlob.mediaElements={},_pGlob.loadedFile="",_pGlob.states=[],_pGlob.percentage=0,_pGlob.openedFile="",_pGlob.xrSessionAcquired=!1,_pGlob.xrSessionCallbacks=[],_pGlob.screenCoords=new v3d.Vector2,_pGlob.intervalTimers={},_pGlob.AXIS_X=new v3d.Vector3(1,0,0),_pGlob.AXIS_Y=new v3d.Vector3(0,1,0),_pGlob.AXIS_Z=new v3d.Vector3(0,0,1),_pGlob.MIN_DRAG_SCALE=.001,_pGlob.SET_OBJ_ROT_EPS=1e-8,_pGlob.vec2Tmp=new v3d.Vector2,_pGlob.vec2Tmp2=new v3d.Vector2,_pGlob.vec3Tmp=new v3d.Vector3,_pGlob.vec3Tmp2=new v3d.Vector3,_pGlob.vec3Tmp3=new v3d.Vector3,_pGlob.vec3Tmp4=new v3d.Vector3,_pGlob.eulerTmp=new v3d.Euler,_pGlob.eulerTmp2=new v3d.Euler,_pGlob.quatTmp=new v3d.Quaternion,_pGlob.quatTmp2=new v3d.Quaternion,_pGlob.colorTmp=new v3d.Color,_pGlob.mat4Tmp=new v3d.Matrix4,_pGlob.planeTmp=new v3d.Plane,_pGlob.raycasterTmp=new v3d.Raycaster;var PL=v3d.PL=v3d.PL||{};v3d.puzzles=PL,PL.procedures=PL.procedures||{},PL.execInitPuzzles=function(e){var t={};t.percentage=0,t.output={initOptions:{fadeAnnotations:!0,useBkgTransp:!1,preserveDrawBuf:!1,useCompAssets:!1,useFullscreen:!0,useCustomPreloader:!1,preloaderStartCb:function(){},preloaderProgressCb:function(){},preloaderEndCb:function(){}}},t.container=e!==void 0&&"container"in e?e.container:"";return t.output},PL.init=function(appInstance,initOptions){function getElements(e,t){var o=[];if(Array.isArray(e)&&"CONTAINER"!=e[0]&&"WINDOW"!=e[0]&&"DOCUMENT"!=e[0]&&"BODY"!=e[0]&&"QUERYSELECTOR"!=e[0])for(var r=0;r<e.length;r++)o.push(getElement(e[r],t));else o.push(getElement(e,t));return o}function getElement(e,t){var o;if(!(Array.isArray(e)&&"CONTAINER"==e[0]))o=Array.isArray(e)&&"WINDOW"==e[0]?t?parent:window:Array.isArray(e)&&"DOCUMENT"==e[0]?t?parent.document:document:Array.isArray(e)&&"BODY"==e[0]?t?parent.document.body:document.body:Array.isArray(e)&&"QUERYSELECTOR"==e[0]?t?parent.document.querySelector(e):document.querySelector(e):t?parent.document.getElementById(e):document.getElementById(e);else if(null!==appInstance)o=appInstance.container;else if("undefined"!=typeof _initGlob){var e=_initGlob.container;o=t?parent.document.getElementById(e):document.getElementById(e)}return o}function addHTMLElement(e,t,o,r,n){var a=n?window.parent:window,i=a.document.createElement(e);""!==t&&(i.id=t);var s=getElement(r,n);s instanceof a.Element&&("TO"===o?s.appendChild(i):"BEFORE"===o?s.insertAdjacentElement("beforebegin",i):"AFTER"===o?s.insertAdjacentElement("afterend",i):void 0)}function setHTMLElemAttribute(e,t,o,r){for(var n,a=getElements(o,r),s=0;s<a.length;s++)n=a[s],n&&("style"===e?n.setAttribute(e,t):("href"==e||"src"==e)&&t instanceof Promise?t.then(function(t){n[e]=t}):n[e]=t)}function setHTMLElemStyle(e,t,o,r){for(var n,a=getElements(o,r),s=0;s<a.length;s++)n=a[s],n&&n.style&&(n.style[e]=t)}function INSTRUCTIONS(){addHTMLElement("div","instructions","TO",["CONTAINER"],!1),setHTMLElemAttribute("innerHTML","Select one of the logos below to load their SVG<br>or select 'upload' to load a local file or from a URL.","instructions",!1),setHTMLElemStyle("fontFamily","arial","instructions",!1),setHTMLElemStyle("color","white","instructions",!1)}function openFile(e){function t(t){var r=t.target.files[0],n=new FileReader;n.addEventListener("load",function(){_pGlob.openedFile=n.result,e(),document.body.removeChild(o)},!1),n.readAsDataURL(r)}_pGlob.openedFile="";var o=document.createElement("input");o.type="file",o.style="display: none",document.body.appendChild(o),o.addEventListener("change",t),v3d.PL.editorEventListeners&&v3d.PL.editorEventListeners.push([o,"change",t]),appInstance.controls&&appInstance.controls.forceMouseUp(),o.click()}function eventHTMLElem(e,t,o,r){for(var n,a=getElements(t,o),s=0;s<a.length;s++)n=a[s],n&&(n.addEventListener(e,r),v3d.PL.editorEventListeners&&v3d.PL.editorEventListeners.push([n,e,r]))}function BUTTON_UPLOAD(){addHTMLElement("button","button_upload","TO",["CONTAINER"],!1),setHTMLElemAttribute("innerHTML","UPLOAD","button_upload",!1),setHTMLElemStyle("fontFamily","arial","button_upload",!1),setHTMLElemStyle("color","white","button_upload",!1),setHTMLElemStyle("fontSize","40","button_upload",!1),setHTMLElemStyle("fontStyle","bold","button_upload",!1),setHTMLElemStyle("background","transparent","button_upload",!1),setHTMLElemStyle("border","0","button_upload",!1),BUTTONS_POINTER("button_upload"),eventHTMLElem("pointerup","button_upload",!1,function(){openFile(function(){UPLOAD_SVG(_pGlob.openedFile)})})}function getHTMLElemAttribute(e,t,o){var r=getElement(t,o);return r?r[e]:""}function FORM_URL(){addHTMLElement("input","form_url","TO",["CONTAINER"],!1),setHTMLElemAttribute("value","https://gliftek.com/verge_3d_plugins/assets/demos/GLIFTEK_Plugins_SVG_Loader/Verge3D_Logo_1000x1000.svg","form_url",!1),setHTMLElemStyle("fontFamily","arial","form_url",!1),setHTMLElemStyle("color","white","form_url",!1),setHTMLElemStyle("fontSize","40","form_url",!1),setHTMLElemStyle("fontStyle","bold","form_url",!1),setHTMLElemStyle("background","transparent","form_url",!1),eventHTMLElem("change","form_url",!1,function(){UPLOAD_SVG(getHTMLElemAttribute("value","form_url",!1))})}function BUTTON_RESET(){addHTMLElement("button","button_reset","TO",["CONTAINER"],!1),setHTMLElemAttribute("innerHTML","RESET","button_reset",!1),setHTMLElemStyle("fontFamily","arial","button_reset",!1),setHTMLElemStyle("color","white","button_reset",!1),setHTMLElemStyle("fontSize","40","button_reset",!1),setHTMLElemStyle("fontStyle","bold","button_reset",!1),setHTMLElemStyle("background","transparent","button_reset",!1),setHTMLElemStyle("border","0","button_reset",!1),BUTTONS_POINTER("button_reset"),eventHTMLElem("pointerup","button_reset",!1,function(){RESET_OBJECTS()})}function dropFileTo(e,t){for(var o,r=getElements(e,t),n=0;n<r.length;n++)o=r[n],o&&(o.addEventListener("drop",dropEventCb),v3d.PL.editorEventListeners&&v3d.PL.editorEventListeners.push([o,"drop",dropEventCb]),o.addEventListener("dragover",dragOverEventCb),v3d.PL.editorEventListeners&&v3d.PL.editorEventListeners.push([o,"dragover",dragOverEventCb])),o.addEventListener("dragover",dragOverEventCb),v3d.PL.editorEventListeners&&v3d.PL.editorEventListeners.push([o,"dragover",dragOverEventCb])}function MAKE_BUTTONS(){BUTTON_GLIFTEK(),addHTMLElement("br","","TO",["CONTAINER"],!1),BUTTON_VERGE_3D(),addHTMLElement("br","","TO",["CONTAINER"],!1),BUTTON_UPLOAD(),addHTMLElement("br","","TO",["CONTAINER"],!1),FORM_URL(),addHTMLElement("br","","TO",["CONTAINER"],!1),dropFileTo(["CONTAINER"],!1,function(){},function(){})}function svgAsObjLoader(){return function(e,t,o){let r,n,a,i=[],s=new THREE.Group;e?function(){THREE.SVGLoader=function(e){THREE.Loader.call(this,e),this.defaultDPI=90,this.defaultUnit="px"},THREE.SVGLoader.prototype=Object.assign(Object.create(THREE.Loader.prototype),{constructor:THREE.SVGLoader,load:function(t,o,r,n){var a=this,i=new THREE.FileLoader(a.manager);i.setPath(a.path),i.setRequestHeader(a.requestHeader),i.setWithCredentials(a.withCredentials),i.load(t,function(e){try{o(a.parse(e))}catch(o){n?n(o):console.error(o),a.manager.itemError(t)}},r,n)},parse:function(e){function t(e,n){if(1===e.nodeType){var a=_(e),m=!0,y=null;switch(e.nodeName){case"svg":break;case"style":r(e);break;case"g":n=c(e,n);break;case"path":n=c(e,n),e.hasAttribute("d")&&(y=o(e)),e.hasAttribute("id")&&(y.id=e.id);break;case"rect":n=c(e,n),y=i(e);break;case"polygon":n=c(e,n),y=s(e);break;case"polyline":n=c(e,n),y=l(e);break;case"circle":n=c(e,n),y=d(e);break;case"ellipse":n=c(e,n),y=u(e);break;case"line":n=c(e,n),y=p(e);break;case"defs":m=!1;break;case"use":n=c(e,n);var g=e.href.baseVal.substring(1),h=e.viewportElement.getElementById(g);h?t(h,n):console.warn("SVGLoader: 'use node' references non-existent node id: "+g);break;default:}if(y&&(void 0!==n.fill&&"none"!==n.fill&&y.color.setStyle(n.fill),T(y,V),f.push(y),y.userData={node:e,style:n}),m)for(var E=e.childNodes,x=0;x<E.length;x++)t(E[x],n);a&&(O.pop(),0<O.length?V.copy(O[O.length-1]):V.identity())}}function o(e){for(var t=new THREE.ShapePath,o=new THREE.Vector2,r=new THREE.Vector2,a=new THREE.Vector2,s=!0,u=!1,p=e.getAttribute("d"),d=p.match(/[a-df-z][^a-df-z]*/ig),c=0,g=d.length;c<g;c++){var l=d[c],_=l.charAt(0),h=l.substr(1).trim();switch(!0===s&&(u=!0,s=!1),_){case"M":for(var T=y(h),E=0,x=T.length;E<x;E+=2)o.x=T[E+0],o.y=T[E+1],r.x=o.x,r.y=o.y,0==E?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y),0==E&&!0===u&&a.copy(o);break;case"H":for(var T=y(h),E=0,x=T.length;E<x;E++)o.x=T[E],r.x=o.x,r.y=o.y,t.lineTo(o.x,o.y),0==E&&!0===u&&a.copy(o);break;case"V":for(var T=y(h),E=0,x=T.length;E<x;E++)o.y=T[E],r.x=o.x,r.y=o.y,t.lineTo(o.x,o.y),0==E&&!0===u&&a.copy(o);break;case"L":for(var T=y(h),E=0,x=T.length;E<x;E+=2)o.x=T[E+0],o.y=T[E+1],r.x=o.x,r.y=o.y,t.lineTo(o.x,o.y),0==E&&!0===u&&a.copy(o);break;case"C":for(var T=y(h),E=0,x=T.length;E<x;E+=6)t.bezierCurveTo(T[E+0],T[E+1],T[E+2],T[E+3],T[E+4],T[E+5]),r.x=T[E+2],r.y=T[E+3],o.x=T[E+4],o.y=T[E+5],0==E&&!0===u&&a.copy(o);break;case"S":for(var T=y(h),E=0,x=T.length;E<x;E+=4)t.bezierCurveTo(m(o.x,r.x),m(o.y,r.y),T[E+0],T[E+1],T[E+2],T[E+3]),r.x=T[E+0],r.y=T[E+1],o.x=T[E+2],o.y=T[E+3],0==E&&!0===u&&a.copy(o);break;case"Q":for(var T=y(h),E=0,x=T.length;E<x;E+=4)t.quadraticCurveTo(T[E+0],T[E+1],T[E+2],T[E+3]),r.x=T[E+0],r.y=T[E+1],o.x=T[E+2],o.y=T[E+3],0==E&&!0===u&&a.copy(o);break;case"T":for(var T=y(h),E=0,x=T.length;E<x;E+=2){var b=m(o.x,r.x),S=m(o.y,r.y);t.quadraticCurveTo(b,S,T[E+0],T[E+1]),r.x=b,r.y=S,o.x=T[E+0],o.y=T[E+1],0==E&&!0===u&&a.copy(o)}break;case"A":for(var T=y(h,[3,4],7),E=0,x=T.length;E<x;E+=7)if(T[E+5]!=o.x||T[E+6]!=o.y){var I=o.clone();o.x=T[E+5],o.y=T[E+6],r.x=o.x,r.y=o.y,n(t,T[E],T[E+1],T[E+2],T[E+3],T[E+4],I,o),0===E&&!0===u&&a.copy(o)}break;case"m":for(var T=y(h),E=0,x=T.length;E<x;E+=2)o.x+=T[E+0],o.y+=T[E+1],r.x=o.x,r.y=o.y,0==E?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y),0==E&&!0===u&&a.copy(o);break;case"h":for(var T=y(h),E=0,x=T.length;E<x;E++)o.x+=T[E],r.x=o.x,r.y=o.y,t.lineTo(o.x,o.y),0==E&&!0===u&&a.copy(o);break;case"v":for(var T=y(h),E=0,x=T.length;E<x;E++)o.y+=T[E],r.x=o.x,r.y=o.y,t.lineTo(o.x,o.y),0==E&&!0===u&&a.copy(o);break;case"l":for(var T=y(h),E=0,x=T.length;E<x;E+=2)o.x+=T[E+0],o.y+=T[E+1],r.x=o.x,r.y=o.y,t.lineTo(o.x,o.y),0==E&&!0===u&&a.copy(o);break;case"c":for(var T=y(h),E=0,x=T.length;E<x;E+=6)t.bezierCurveTo(o.x+T[E+0],o.y+T[E+1],o.x+T[E+2],o.y+T[E+3],o.x+T[E+4],o.y+T[E+5]),r.x=o.x+T[E+2],r.y=o.y+T[E+3],o.x+=T[E+4],o.y+=T[E+5],0==E&&!0===u&&a.copy(o);break;case"s":for(var T=y(h),E=0,x=T.length;E<x;E+=4)t.bezierCurveTo(m(o.x,r.x),m(o.y,r.y),o.x+T[E+0],o.y+T[E+1],o.x+T[E+2],o.y+T[E+3]),r.x=o.x+T[E+0],r.y=o.y+T[E+1],o.x+=T[E+2],o.y+=T[E+3],0==E&&!0===u&&a.copy(o);break;case"q":for(var T=y(h),E=0,x=T.length;E<x;E+=4)t.quadraticCurveTo(o.x+T[E+0],o.y+T[E+1],o.x+T[E+2],o.y+T[E+3]),r.x=o.x+T[E+0],r.y=o.y+T[E+1],o.x+=T[E+2],o.y+=T[E+3],0==E&&!0===u&&a.copy(o);break;case"t":for(var T=y(h),E=0,x=T.length;E<x;E+=2){var b=m(o.x,r.x),S=m(o.y,r.y);t.quadraticCurveTo(b,S,o.x+T[E+0],o.y+T[E+1]),r.x=b,r.y=S,o.x+=T[E+0],o.y+=T[E+1],0==E&&!0===u&&a.copy(o)}break;case"a":for(var T=y(h,[3,4],7),E=0,x=T.length;E<x;E+=7)if(0!=T[E+5]||0!=T[E+6]){var I=o.clone();o.x+=T[E+5],o.y+=T[E+6],r.x=o.x,r.y=o.y,n(t,T[E],T[E+1],T[E+2],T[E+3],T[E+4],I,o),0===E&&!0===u&&a.copy(o)}break;case"Z":case"z":t.currentPath.autoClose=!0,0<t.currentPath.curves.length&&(o.copy(a),t.currentPath.currentPoint.copy(o),s=!0);break;default:console.warn(l);}u=!1}return t}function r(e){if(e.sheet&&e.sheet.cssRules&&e.sheet.cssRules.length)for(var t,o=0;o<e.sheet.cssRules.length;o++)if(t=e.sheet.cssRules[o],1===t.type)for(var r=t.selectorText.split(/,/gm).filter(Boolean).map(e=>e.trim()),n=0;n<r.length;n++)C[r[n]]=Object.assign(C[r[n]]||{},t.style)}function n(e,t,o,r,n,i,l,d){if(0==t||0==o)return void e.lineTo(d.x,d.y);r=r*Math.PI/180,t=Math.abs(t),o=Math.abs(o);var u=(l.x-d.x)/2,p=(l.y-d.y)/2,c=Math.cos(r)*u+Math.sin(r)*p,m=-Math.sin(r)*u+Math.cos(r)*p,y=t*t,g=o*o,_=c*c,h=m*m,T=_/y+h/g;if(1<T){var E=Math.sqrt(T);t=E*t,o=E*o,y=t*t,g=o*o}var s=y*h+g*_,x=(y*g-s)/s,b=Math.sqrt(Math.max(0,x));n===i&&(b=-b);var S=b*t*m/o,I=-b*o*c/t,A=Math.cos(r)*S-Math.sin(r)*I+(l.x+d.x)/2,f=Math.sin(r)*S+Math.cos(r)*I+(l.y+d.y)/2,C=a(1,0,(c-S)/t,(m-I)/o),O=a((c-S)/t,(m-I)/o,(-c-S)/t,(-m-I)/o)%(2*Math.PI);e.currentPath.absellipse(A,f,t,o,C,C+O,0===i,r)}function a(e,t,o,r){var n=Math.sqrt(e*e+t*t)*Math.sqrt(o*o+r*r),a=Math.acos(Math.max(-1,Math.min(1,(e*o+t*r)/n)));return 0>e*r-t*o&&(a=-a),a}function i(e){var t=g(e.getAttribute("x")||0),o=g(e.getAttribute("y")||0),r=g(e.getAttribute("rx")||0),n=g(e.getAttribute("ry")||0),a=g(e.getAttribute("width")),i=g(e.getAttribute("height")),s=new THREE.ShapePath;return s.moveTo(t+2*r,o),s.lineTo(t+a-2*r,o),(0!==r||0!==n)&&s.bezierCurveTo(t+a,o,t+a,o,t+a,o+2*n),s.lineTo(t+a,o+i-2*n),(0!==r||0!==n)&&s.bezierCurveTo(t+a,o+i,t+a,o+i,t+a-2*r,o+i),s.lineTo(t+2*r,o+i),(0!==r||0!==n)&&s.bezierCurveTo(t,o+i,t,o+i,t,o+i-2*n),s.lineTo(t,o+2*n),(0!==r||0!==n)&&s.bezierCurveTo(t,o,t,o,t+2*r,o),s}function s(e){function t(e,t,n){var a=g(t),i=g(n);0===r?o.moveTo(a,i):o.lineTo(a,i),r++}var o=new THREE.ShapePath,r=0;return e.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,t),o.currentPath.autoClose=!0,o}function l(e){function t(e,t,n){var a=g(t),i=g(n);0===r?o.moveTo(a,i):o.lineTo(a,i),r++}var o=new THREE.ShapePath,r=0;return e.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,t),o.currentPath.autoClose=!1,o}function d(e){var t=g(e.getAttribute("cx")||0),o=g(e.getAttribute("cy")||0),n=g(e.getAttribute("r")||0),r=new THREE.Path;r.absarc(t,o,n,0,2*Math.PI);var a=new THREE.ShapePath;return a.subPaths.push(r),a}function u(e){var t=g(e.getAttribute("cx")||0),o=g(e.getAttribute("cy")||0),r=g(e.getAttribute("rx")||0),n=g(e.getAttribute("ry")||0),a=new THREE.Path;a.absellipse(t,o,r,n,0,2*Math.PI);var i=new THREE.ShapePath;return i.subPaths.push(a),i}function p(e){var t=g(e.getAttribute("x1")||0),o=g(e.getAttribute("y1")||0),r=g(e.getAttribute("x2")||0),n=g(e.getAttribute("y2")||0),a=new THREE.ShapePath;return a.moveTo(t,o),a.lineTo(r,n),a.currentPath.autoClose=!1,a}function c(e,t){function o(o,r,n){void 0===n&&(n=function(e){return e.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),e}),e.hasAttribute(o)&&(t[r]=n(e.getAttribute(o))),a[o]&&(t[r]=n(a[o])),e.style&&""!==e.style[o]&&(t[r]=n(e.style[o]))}function r(e){return Math.max(0,Math.min(1,g(e)))}function n(e){return Math.max(0,g(e))}t=Object.assign({},t);var a={};if(e.hasAttribute("class"))for(var s=e.getAttribute("class").split(/\s/).filter(Boolean).map(e=>e.trim()),l=0;l<s.length;l++)a=Object.assign(a,C["."+s[l]]);return e.hasAttribute("id")&&(a=Object.assign(a,C["#"+e.getAttribute("id")])),o("fill","fill"),o("fill-opacity","fillOpacity",r),o("opacity","opacity",r),o("stroke","stroke"),o("stroke-opacity","strokeOpacity",r),o("stroke-width","strokeWidth",n),o("stroke-linejoin","strokeLineJoin"),o("stroke-linecap","strokeLineCap"),o("stroke-miterlimit","strokeMiterLimit",n),o("visibility","visibility"),t}function m(e,t){return e-(t-e)}function y(e,t,o){function r(e,t,o){var r=new SyntaxError("Unexpected character \""+e+"\" at index "+t+".");throw r.partial=o,r}function n(){""!==g&&(""===_?y.push(+g):y.push(+g*Math.pow(10,+_))),g="",_=""}if("string"!=typeof e)throw new TypeError("Invalid input: "+typeof e);var a,s={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},l=0,d=1,u=2,p=3,c=l,m=!0,y=[],g="",_="",h=0,T=e.length;for(h=0;h<T;h++){if(a=e[h],Array.isArray(t)&&t.includes(y.length%o)&&s.FLAGS.test(a)){c=d,g=a,n();continue}if(c===l){if(s.WHITESPACE.test(a))continue;if(s.DIGIT.test(a)||s.SIGN.test(a)){c=d,g=a;continue}if(s.POINT.test(a)){c=u,g=a;continue}s.COMMA.test(a)&&(m&&r(a,h,y),m=!0)}if(c===d){if(s.DIGIT.test(a)){g+=a;continue}if(s.POINT.test(a)){g+=a,c=u;continue}if(s.EXP.test(a)){c=p;continue}s.SIGN.test(a)&&1===g.length&&s.SIGN.test(g[0])&&r(a,h,y)}if(c===u){if(s.DIGIT.test(a)){g+=a;continue}if(s.EXP.test(a)){c=p;continue}s.POINT.test(a)&&"."===g[g.length-1]&&r(a,h,y)}if(c===p){if(s.DIGIT.test(a)){_+=a;continue}if(s.SIGN.test(a)){if(""===_){_+=a;continue}1===_.length&&s.SIGN.test(_)&&r(a,h,y)}}s.WHITESPACE.test(a)?(n(),c=l,m=!1):s.COMMA.test(a)?(n(),c=l,m=!0):s.SIGN.test(a)?(n(),c=d,g=a):s.POINT.test(a)?(n(),c=u,g=a):r(a,h,y)}return n(),y}function g(e){var t="px";if("string"==typeof e||e instanceof String)for(var o,r=0,a=I.length;r<a;r++)if(o=I[r],e.endsWith(o)){t=o,e=e.substring(0,e.length-o.length);break}var n;return"px"===t&&"px"!==S.defaultUnit?n=A["in"][S.defaultUnit]/S.defaultDPI:(n=A[t][S.defaultUnit],0>n&&(n=A[t]["in"]*S.defaultDPI)),n*parseFloat(e)}function _(e){if(!(e.hasAttribute("transform")||"use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))))return null;var t=h(e);return 0<O.length&&t.premultiply(O[O.length-1]),V.copy(t),O.push(t),t}function h(e){var t=new THREE.Matrix3,o=L;if("use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))){var r=g(e.getAttribute("x")),n=g(e.getAttribute("y"));t.translate(r,n)}if(e.hasAttribute("transform"))for(var a,i=e.getAttribute("transform").split(")"),s=i.length-1;0<=s;s--)if(a=i[s].trim(),""!==a){var l=a.indexOf("("),d=a.length;if(0<l&&l<d){var u=a.substr(0,l),p=y(a.substr(l+1,d-l-1));switch(o.identity(),u){case"translate":if(1<=p.length){var r=p[0],n=r;2<=p.length&&(n=p[1]),o.translate(r,n)}break;case"rotate":if(1<=p.length){var c=0,m=0,_=0;c=-p[0]*Math.PI/180,3<=p.length&&(m=p[1],_=p[2]),P.identity().translate(-m,-_),R.identity().rotate(c),v.multiplyMatrices(R,P),P.identity().translate(m,_),o.multiplyMatrices(P,v)}break;case"scale":if(1<=p.length){var h=p[0],T=h;2<=p.length&&(T=p[1]),o.scale(h,T)}break;case"skewX":1===p.length&&o.set(1,Math.tan(p[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===p.length&&o.set(1,0,0,Math.tan(p[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===p.length&&o.set(p[0],p[2],p[4],p[1],p[3],p[5],0,0,1);}}t.premultiply(o)}return t}function T(e,t){function o(e){N.set(e.x,e.y,1).applyMatrix3(t),e.set(N.x,N.y)}for(var r=E(t),a=e.subPaths,s=0,l=a.length;s<l;s++)for(var n,d=a[s],u=d.curves,p=0;p<u.length;p++)n=u[p],n.isLineCurve?(o(n.v1),o(n.v2)):n.isCubicBezierCurve?(o(n.v0),o(n.v1),o(n.v2),o(n.v3)):n.isQuadraticBezierCurve?(o(n.v0),o(n.v1),o(n.v2)):n.isEllipseCurve&&(r&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),G.set(n.aX,n.aY),o(G),n.aX=G.x,n.aY=G.y,n.xRadius*=x(t),n.yRadius*=b(t))}function E(e){return 0!==e.elements[1]||0!==e.elements[3]}function x(e){var t=e.elements;return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function b(e){var t=e.elements;return Math.sqrt(t[3]*t[3]+t[4]*t[4])}var S=this,I=["mm","cm","in","pt","pc","px"],A={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}},f=[],C={},O=[],L=new THREE.Matrix3,P=new THREE.Matrix3,R=new THREE.Matrix3,v=new THREE.Matrix3,G=new THREE.Vector2,N=new THREE.Vector3,V=new THREE.Matrix3,M=new DOMParser().parseFromString(e,"image/svg+xml");t(M.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});var D={paths:f,xml:M.documentElement};return D}}),THREE.SVGLoader.createShapes=function(e){function t(e,t,r,n){var a=e.x,d=t.x,u=r.x,p=n.x,c=e.y,m=t.y,g=r.y,_=n.y,h=(p-u)*(c-g)-(_-g)*(a-u),T=(_-g)*(d-a)-(p-u)*(m-c),E=h/T,b=((d-a)*(c-g)-(m-c)*(a-u))/T;if(0===T&&0!==h||0>=E||1<=E||0>b||1<b)return null;if(0===h&&0===T){for(var S=0;2>S;S++){if(o(0==S?r:n,e,t),l.loc==s.ORIGIN){var I=0===S?r:n;return{x:I.x,y:I.y,t:l.t}}if(l.loc==s.BETWEEN){var A=+(a+l.t*(d-a)).toPrecision(10),f=+(c+l.t*(m-c)).toPrecision(10);return{x:A,y:f,t:l.t}}}return null}for(var S=0;2>S;S++)if(o(0==S?r:n,e,t),l.loc==s.ORIGIN){var I=0===S?r:n;return{x:I.x,y:I.y,t:l.t}}var A=+(a+E*(d-a)).toPrecision(10),f=+(c+E*(m-c)).toPrecision(10);return{x:A,y:f,t:E}}function o(e,o,r){var n=r.x-o.x,a=r.y-o.y,i=e.x-o.x,d=e.y-o.y,u=n*d-i*a;if(e.x===o.x&&e.y===o.y)return l.loc=s.ORIGIN,void(l.t=0);if(e.x===r.x&&e.y===r.y)return l.loc=s.DESTINATION,void(l.t=1);if(u<-Number.EPSILON)return void(l.loc=s.LEFT);if(u>Number.EPSILON)return void(l.loc=s.RIGHT);if(0>n*i||0>a*d)return void(l.loc=s.BEHIND);if(Math.sqrt(n*n+a*a)<Math.sqrt(i*i+d*d))return void(l.loc=s.BEYOND);var p;p=0==n?d/a:i/n,l.loc=s.BETWEEN,l.t=p}function r(e,o){const r=[],n=[];for(let a=1;a<e.length;a++){const i=e[a-1],s=e[a];for(let e=1;e<o.length;e++){const a=o[e-1],l=o[e],d=t(i,s,a,l);null!==d&&void 0===r.find(e=>e.t<=d.t+Number.EPSILON&&e.t>=d.t-Number.EPSILON)&&(r.push(d),n.push(new THREE.Vector2(d.x,d.y)))}}return n}function n(e,t,o){const n=new THREE.Vector2;t.getCenter(n);const a=[];return o.forEach(t=>{if(t.boundingBox.containsPoint(n)){const o=r(e,t.points);o.forEach(e=>{a.push({identifier:t.identifier,isCW:t.isCW,point:e})})}}),a.sort((e,t)=>e.point.x-t.point.x),a}function a(e,t,o,r,a){(null===a||void 0===a||""===a)&&(a="nonzero");const i=new THREE.Vector2;e.boundingBox.getCenter(i);const s=[new THREE.Vector2(o,i.y),new THREE.Vector2(r,i.y)],l=n(s,e.boundingBox,t);l.sort((e,t)=>e.point.x-t.point.x);const d=[],u=[];l.forEach(t=>{t.identifier===e.identifier?d.push(t):u.push(t)});const p=d[0].point.x,c=[];for(let n=0;n<u.length&&u[n].point.x<p;)0<c.length&&c[c.length-1]===u[n].identifier?c.pop():c.push(u[n].identifier),n++;if(c.push(e.identifier),"evenodd"===a){const t=0==c.length%2,o=c[c.length-2];return{identifier:e.identifier,isHole:t,for:o}}if("nonzero"===a){let o=!0,r=null,n=null;for(let e=0;e<c.length;e++){const a=c[e];o?(n=t[a].isCW,o=!1,r=a):n!==t[a].isCW&&(n=t[a].isCW,o=!0)}return{identifier:e.identifier,isHole:o,for:r}}console.warn("fill-rule: \""+a+"\" is currently not implemented.")}const i=999999999,s={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},l={loc:s.ORIGIN,t:0};let d=0,u=999999999,c=-999999999,m=e.subPaths.map(e=>{const t=e.getPoints();let o=-999999999,r=i,n=-999999999,a=i;for(let s=0;s<t.length;s++){const e=t[s];e.y>o&&(o=e.y),e.y<r&&(r=e.y),e.x>n&&(n=e.x),e.x<a&&(a=e.x)}return c<=n&&(c=n+1),u>=a&&(u=a-1),{points:t,isCW:THREE.ShapeUtils.isClockWise(t),identifier:d++,boundingBox:new THREE.Box2(new THREE.Vector2(a,r),new THREE.Vector2(n,o))}});m=m.filter(e=>0<e.points.length);const y=m.map(t=>a(t,m,u,c,e.userData.style.fillRule)),g=[];return m.forEach(e=>{const t=y[e.identifier];if(!t.isHole){const t=new THREE.Shape(e.points),o=y.filter(t=>t.isHole&&t.for===e.identifier);o.forEach(e=>{const o=m[e.identifier];t.holes.push(new THREE.Path(o.points))}),g.push(t)}}),g},THREE.SVGLoader.getStrokeStyle=function(e,t,o,r,n){return e=void 0===e?1:e,t=void 0===t?"#000":t,o=void 0===o?"miter":o,r=void 0===r?"butt":r,n=void 0===n?4:n,{strokeColor:t,strokeWidth:e,strokeLineJoin:o,strokeLineCap:r,strokeMiterLimit:n}},THREE.SVGLoader.pointsToStroke=function(e,t,o,r){var n=[],a=[],i=[];if(0===THREE.SVGLoader.pointsToStrokeWithBuffers(e,t,o,r,n,a,i))return null;var s=new THREE.BufferGeometry;return s.setAttribute("position",new THREE.Float32BufferAttribute(n,3)),s.setAttribute("normal",new THREE.Float32BufferAttribute(a,3)),s.setAttribute("uv",new THREE.Float32BufferAttribute(i,2)),s},THREE.SVGLoader.pointsToStrokeWithBuffers=function(){var e=new THREE.Vector2,t=new THREE.Vector2,o=new THREE.Vector2,r=new THREE.Vector2,n=new THREE.Vector2,a=new THREE.Vector2,i=new THREE.Vector2,s=new THREE.Vector2,l=new THREE.Vector2,d=new THREE.Vector2,u=new THREE.Vector2,p=new THREE.Vector2,c=new THREE.Vector2,m=new THREE.Vector2,y=new THREE.Vector2,g=new THREE.Vector2,_=new THREE.Vector2;return function(h,T,E,x,b,S,I,A){function f(e,t,o){return o.subVectors(t,e),o.set(-o.y,o.x).normalize()}function C(e,t,o){b&&(b[W]=e.x,b[W+1]=e.y,b[W+2]=0,S&&(S[W]=0,S[W+1]=0,S[W+2]=1),W+=3,I&&(I[Y]=t,I[Y+1]=o,Y+=2)),H+=3}function O(n,a,s,l,d){e.copy(a).sub(n).normalize(),t.copy(s).sub(n).normalize();var u=Math.PI,p=e.dot(t);1>Math.abs(p)&&(u=Math.abs(Math.acos(p))),u/=E,o.copy(a);for(var c=0,m=E-1;c<m;c++)r.copy(o).rotateAround(n,u),C(o,l,d),C(r,l,d),C(n,l,.5),o.copy(r);C(r,l,d),C(s,l,d),C(n,l,.5)}function L(){C(l,z,1),C(s,z,0),C(p,K,0),C(l,z,1),C(p,K,1),C(c,K,0)}function P(e,t,o){t?e?(C(l,z,1),C(s,z,0),C(p,K,0),C(l,z,1),C(p,K,0),C(g,K,1),C(p,o,0),C(m,o,0),C(g,o,.5)):(C(l,z,1),C(s,z,0),C(c,K,1),C(s,z,0),C(g,K,0),C(c,K,1),C(c,o,1),C(y,o,0),C(g,o,.5)):e?(C(p,o,0),C(m,o,0),C(V,o,.5)):(C(c,o,1),C(y,o,0),C(V,o,.5))}function R(e,t){t&&(e?(C(l,z,1),C(s,z,0),C(p,K,0),C(l,z,1),C(p,K,0),C(g,K,1),C(p,z,0),C(V,K,.5),C(g,K,1),C(V,K,.5),C(m,z,0),C(g,K,1)):(C(l,z,1),C(s,z,0),C(c,K,1),C(s,z,0),C(g,K,0),C(c,K,1),C(c,z,1),C(g,K,0),C(V,K,.5),C(V,K,.5),C(g,K,0),C(y,z,1)))}function v(n,a,i,s,l,d){switch(T.strokeLineCap){case"round":l?O(n,i,a,d,.5):O(n,a,i,d,.5);break;case"square":if(l)e.subVectors(a,n),t.set(e.y,-e.x),o.addVectors(e,t).add(n),r.subVectors(t,e).add(n),s?(o.toArray(b,3),r.toArray(b,0),r.toArray(b,9)):(o.toArray(b,3),o.toArray(b,9),r.toArray(b,0));else{e.subVectors(i,n),t.set(e.y,-e.x),o.addVectors(e,t).add(n),r.subVectors(t,e).add(n);var u=b.length;s?(o.toArray(b,u-3),r.toArray(b,u-6),r.toArray(b,u-12)):(o.toArray(b,u-6),r.toArray(b,u-3),r.toArray(b,u-12))}break;case"butt":default:}}function G(e){for(var t=!1,o=1,r=e.length-1;o<r;o++)if(e[o].distanceTo(e[o+1])<x){t=!0;break}if(!t)return e;for(var a=[e[0]],o=1,r=e.length-1;o<r;o++)e[o].distanceTo(e[o+1])>=x&&a.push(e[o]);return a.push(e[e.length-1]),a}E=E===undefined?12:E,x=x===undefined?.001:x,A=A===undefined?0:A,h=G(h);var N=h.length;if(2>N)return 0;var V,M,D,U,B,k=h[0].equals(h[N-1]),F=h[0],w=T.strokeWidth/2,z=0,j=!1,H=0,W=3*A,Y=2*A;f(h[0],h[1],e).multiplyScalar(w),s.copy(h[0]).sub(e),l.copy(h[0]).add(e),d.copy(s),u.copy(l);for(var q=1;q<N;q++){V=h[q],M=q==N-1?k?h[1]:void 0:h[q+1];var X=e;f(F,V,X),o.copy(X).multiplyScalar(w),p.copy(V).sub(o),c.copy(V).add(o);var K=z+1/(N-1);if(D=!1,void 0!==M){f(V,M,t),o.copy(t).multiplyScalar(w),m.copy(V).sub(o),y.copy(V).add(o),U=!0,o.subVectors(M,F),0>X.dot(o)&&(U=!1),1===q&&(j=U),o.subVectors(M,V),o.normalize();var Z=Math.abs(X.dot(o));if(0!==Z){var J=w/Z;o.multiplyScalar(-J),r.subVectors(V,F),n.copy(r).setLength(J).add(o),g.copy(n).negate();var Q=n.length(),$=r.length();r.divideScalar($),a.subVectors(M,V);var ee=a.length();switch(a.divideScalar(ee),r.dot(g)<$&&a.dot(g)<ee&&(D=!0),_.copy(n).add(V),g.add(V),B=!1,D?U?(y.copy(g),c.copy(g)):(m.copy(g),p.copy(g)):L(),T.strokeLineJoin){case"bevel":P(U,D,K);break;case"round":R(U,D),U?O(V,p,m,K,0):O(V,y,c,K,1);break;case"miter":case"miter-clip":default:var te=w*T.strokeMiterLimit/Q;if(!(1>te))D?(U?(C(l,z,1),C(s,z,0),C(_,K,0),C(l,z,1),C(_,K,0),C(g,K,1)):(C(l,z,1),C(s,z,0),C(_,K,1),C(s,z,0),C(g,K,0),C(_,K,1)),U?m.copy(_):y.copy(_)):U?(C(p,K,0),C(_,K,0),C(V,K,.5),C(V,K,.5),C(_,K,0),C(m,K,0)):(C(c,K,1),C(_,K,1),C(V,K,.5),C(V,K,.5),C(_,K,1),C(y,K,1)),B=!0;else if("miter-clip"!==T.strokeLineJoin){P(U,D,K);break}else R(U,D),U?(a.subVectors(_,p).multiplyScalar(te).add(p),i.subVectors(_,m).multiplyScalar(te).add(m),C(p,K,0),C(a,K,0),C(V,K,.5),C(V,K,.5),C(a,K,0),C(i,K,0),C(V,K,.5),C(i,K,0),C(m,K,0)):(a.subVectors(_,c).multiplyScalar(te).add(c),i.subVectors(_,y).multiplyScalar(te).add(y),C(c,K,1),C(a,K,1),C(V,K,.5),C(V,K,.5),C(a,K,1),C(i,K,1),C(V,K,.5),C(i,K,1),C(y,K,1));}}else L()}else L();k||q!==N-1||v(h[0],d,u,U,!0,z),z=K,F=V,s.copy(m),l.copy(y)}if(!k)v(V,p,c,U,!1,K);else if(D&&b){var oe=_,re=g;j!==U&&(oe=g,re=_),U?(B||j)&&(re.toArray(b,0),re.toArray(b,9),B&&oe.toArray(b,3)):(B||!j)&&(re.toArray(b,3),re.toArray(b,9),B&&oe.toArray(b,0))}return H}}(),console.log("svgFileInput: ",e),function(e){var l=new THREE.SVGLoader;l.load(e,function(e){function l(e,t,o){if("g"===e.nodeName){console.log("g: ",e);let o=e.id;console.log("groupName: ",o);let r=new THREE.Group;r.name=o,console.log("newGroup.name: ",r.name),t=r}else for(let r,n=0;n<p.length;n++)if(r=p[n],r.userData.node===e){console.log("path: ",e),u=e.parentNode.id,console.log("meshGroupName: ",u),d(r,t,o);break}let r=e.childNodes;for(let n=0;n<r.length;n++)l(r[n],t,o)}function d(e,t){let s;!1==o&&(s=new THREE.MeshBasicMaterial({color:new THREE.Color().setStyle(e.userData.style.fill),opacity:e.userData.style.fillOpacity,transparent:1>e.userData.style.fillOpacity,side:THREE.DoubleSide,depthWrite:!1}),s.name="SVG_"+r);const l=THREE.SVGLoader.createShapes(e);for(let d=0;d<l.length;d++){let p=l[d],c=new THREE.ShapeBufferGeometry(p);!0==o&&(s=new THREE.MeshBasicMaterial({color:new THREE.Color().setStyle(e.userData.style.fill),opacity:e.userData.style.fillOpacity,transparent:1>e.userData.style.fillOpacity,side:THREE.DoubleSide,depthWrite:!1}),s.name="SVG_"+e.id);let m=new THREE.Mesh(c,s);!0==o&&(m.name="SVG_"+e.userData.node.id);m.svgDataPaths=e,m.groupName=u,m.SVGname=r,i.push(m.name),m.position.x=a,m.position.y=n,m.material.depthWrite=!0,m.svgSize={x:a,y:n},console.log("SVG loader - mesh.svgSize: ",m.svgSize),t.add(m)}}var u,p=e.paths;console.log("data from data: ",e),e.xml.attributes.id&&(r=e.xml.attributes.id.value,console.log("SVGname: ",r));const c=e.xml.attributes.height.value;console.log("SVGheight: ",c),n=Math.round(e.xml.attributes.height.value/-2),console.log("SVGheightHalf: ",n);const m=e.xml.attributes.width.value;console.log("SVGwidth: ",m),a=Math.round(e.xml.attributes.width.value/-2),console.log("SVGwidthHalf: ",a),s.name=r,s.svgDataPaths=e.paths;s.scale.multiplyScalar(.001*t),s.scale.y*=-1,l(e.xml,s,null);app.scene.add(s),console.log("group: ",s),console.log("LIST_svgParts: ",i)})}(e)}():console.log("Load SVG as Object Puzzle is missing a input!")}.apply(null,arguments)}function UPLOAD_SVG(e){RESET_OBJECTS(),svgAsObjLoader(e,1,!1)}function notIgnoredObj(e){return"AmbientLight"!==e.type&&""!==e.name&&!(e.isMesh&&e.isMaterialGeneratedMesh)&&!e.isAuxClippingMesh}function getObjectByName(e){var t,o=void 0!==_pGlob;return(t=_pGlob.objCache[e],t&&t.name===e)?t:(appInstance.scene.traverse(function(r){!t&&notIgnoredObj(r)&&r.name==e&&(t=r,o&&(_pGlob.objCache[e]=t))}),t)}function getAllObjectNames(){var e=[];return appInstance.scene.traverse(function(t){notIgnoredObj(t)&&e.push(t.name)}),e}function getObjectNamesByGroupName(e){var t=[];return appInstance.scene.traverse(function(o){if(notIgnoredObj(o)){var r=o.groupNames;if(!r)return;for(var n,a=0;a<r.length;a++)n=r[a],n==e&&t.push(o.name)}}),t}function retrieveObjectNames(e){var t=[];return retrieveObjectNamesAcc(e,t),t.filter(function(e){return e})}function retrieveObjectNamesAcc(e,t){if("string"==typeof e)t.push(e);else if(Array.isArray(e)&&"GROUP"==e[0])for(var o=getObjectNamesByGroupName(e[1]),r=0;r<o.length;r++)t.push(o[r]);else if(Array.isArray(e)&&"ALL_OBJECTS"==e[0])for(var o=getAllObjectNames(),r=0;r<o.length;r++)t.push(o[r]);else if(Array.isArray(e))for(var r=0;r<e.length;r++)retrieveObjectNamesAcc(e[r],t)}function getCoordSystem(){var e=appInstance.scene;return e&&"v3d"in e.userData&&"coordSystem"in e.userData.v3d?e.userData.v3d.coordSystem:"Z_UP_RIGHT"}function coordsTransform(e,t,o,r){if(t==o)return e;var n=e.y,a=e.z;return"Z_UP_RIGHT"==t&&"Y_UP_RIGHT"==o?(e.y=a,e.z=r?n:-n):"Y_UP_RIGHT"==t&&"Z_UP_RIGHT"==o?(e.y=r?a:-a,e.z=n):console.error("coordsTransform: Unsupported coordinate space"),e}function objConstraintAddLimit(e,t,o,r,n,a,s,l){var d;if("DISTANCE"==o){if(!a)return;var u=getObjectByName(a);if(!u)return}d=retrieveObjectNames(t);for(var p,c=0;c<d.length;c++)if(p=d[c],p){var m=getObjectByName(p);if(m&&m.constraints){for(var y=m.constraints.length-1;0<=y;y--)m.constraints[y].name==e&&m.constraints.splice(y,1);var g=getCoordSystem();switch(o){case"POS_X":case"POS_Y":case"POS_Z":var _=new v3d.LimitLocationConstraint;if(_.name=e,"Z_UP_RIGHT"==g)var h="POS_X"==o?0:"POS_Y"==o?2:1;else var h="POS_X"==o?0:"POS_Y"==o?1:2;"Z_UP_RIGHT"==g&&"POS_Y"==o?(_.min.setComponent(h,-n),_.max.setComponent(h,-r)):(_.min.setComponent(h,r),_.max.setComponent(h,n)),m.constraints.push(_);break;case"ROT_X":case"ROT_Y":case"ROT_Z":var _=new v3d.LimitRotationConstraint;_.name=e,_.axis="Z_UP_RIGHT"==g?"ROT_X"==o?"X":"ROT_Y"==o?"Z":"Y":"ROT_X"==o?"X":"ROT_Y"==o?"Y":"Z","Z_UP_RIGHT"==g&&"ROT_Y"==o?(_.min=v3d.MathUtils.degToRad(-n),_.max=v3d.MathUtils.degToRad(-r)):(_.min=v3d.MathUtils.degToRad(r),_.max=v3d.MathUtils.degToRad(n)),m.constraints.push(_);break;case"SCALE_X":case"SCALE_Y":case"SCALE_Z":var _=new v3d.LimitScaleConstraint;if(_.name=e,"Z_UP_RIGHT"==g)var h="SCALE_X"==o?0:"SCALE_Y"==o?2:1;else var h="SCALE_X"==o?0:"SCALE_Y"==o?1:2;_.min.setComponent(h,r),_.max.setComponent(h,n),m.constraints.push(_);break;case"DISTANCE":var _=new v3d.LimitDistanceConstraint(u);_.name=e,_.distance=s,_.limitMode=l,m.constraints.push(_);}}}}function CAMERA_CONSTRAINTS(){objConstraintAddLimit("rotX","Camera","ROT_X",80,80,"",0,"LIMITDIST_ONSURFACE"),objConstraintAddLimit("rotY","Camera","ROT_Y",0,0,"",0,"LIMITDIST_ONSURFACE"),objConstraintAddLimit("rotZ","Camera","ROT_Z",0,0,"",0,"LIMITDIST_ONSURFACE")}function removeObject(e){for(var t,o=retrieveObjectNames(e),r=0;r<o.length;r++)if(t=o[r],t){var n=getObjectByName(t);n&&n.parent&&(n.parent.remove(n),_pGlob.objCache={})}}function changeVis(e,t){for(var o,r=retrieveObjectNames(e),n=0;n<r.length;n++)if(o=r[n],o){var a=getObjectByName(o);a&&(a.visible=t)}}function RESET_OBJECTS(){removeObject(Current_SVG),removeObject(Current_SVG_Extruded_Master_Control),removeObject(LIST_Meshes_From_Extrusion),removeObject(LIST_Controls_From_Extrusion),changeVis("Plane",!1)}function extrudeGeometry(){return function(objInput,segmentInput,depthScaleInput,separateMaterialsCheckbox,frontAndBackMatInput,sideMatInput,bevelEnabledCheckbox,bevelThicknessInput,bevelSizeInput,bevelOffsetInput,bevelSegmentsInput){function mainFunction(){function extrudeObject(obj){function offsetObjectsToCenter(){const e=new THREE.Box3().setFromObject(svgGroup),t=new THREE.Vector3;e.getSize(t);const o=t.y/-2,r=t.x/-2;svgGroup.children.forEach(e=>{e.position.x=r,e.position.y=o});const n=-.005;svgGroup.scale.set(n,n,n),svgGroup.scale.y*=-1,svgGroup.rotateX(180*(Math.PI/180)),svgGroup.rotateY(180*(Math.PI/180))}console.log("obj: ",obj),1<obj.svgDataPaths.length?svgDataPaths=obj.svgDataPaths:(obj.svgDataPaths.length=1)&&(svgDataPaths=[],svgDataPaths.push(obj.svgDataPaths)),console.log("Extrude Geometery - svgDataPaths: ",svgDataPaths);const svgGroup=new THREE.Group;svgDataPaths.forEach(path=>{console.log("Extrude Geometery - path: ",path);const shapes=path.toShapes(!0);shapes.forEach(shape=>{const geometry=new THREE.ExtrudeGeometry(shape,{steps:segmentInput,depth:depthScaleInput,bevelEnabled:bevelEnabledCheckbox,bevelThickness:bevelThicknessInput,bevelSize:bevelSizeInput,bevelOffset:bevelOffsetInput,bevelSegments:bevelSegmentsInput});let mesh;if(!0==separateMaterialsCheckbox){console.log("frontAndBackMatInput",frontAndBackMatInput);let e;app.scene.traverse(function(t){t instanceof v3d.Mesh&&t.material.name==frontAndBackMatInput&&(e=t.material)}),console.log("sideMatInput",sideMatInput);let t;app.scene.traverse(function(e){e instanceof v3d.Mesh&&e.material.name==sideMatInput&&(t=e.material)});let o=e;o.name="SVG_"+path.id+"_frontAndBack",console.log("material_frontAndBack",o);let r=t;r.name="SVG_"+path.id+"_Sides",console.log("material_Sides",r);mesh=new THREE.Mesh(geometry,[o,r]),console.log("mesh.material[0].name",mesh.material[0].name),console.log("mesh.material[1].name",mesh.material[1].name)}else if(!1==separateMaterialsCheckbox){let e=new THREE.MeshPhongMaterial({color:new THREE.Color().setStyle(path.userData.style.fill),opacity:path.userData.style.fillOpacity,transparent:1>path.userData.style.fillOpacity,side:THREE.DoubleSide,depthWrite:!0});e.name="SVG_"+path.id+"_Extruded",console.log("mesh material from Extrude:",e),geometry.computeVertexNormals(),geometry.computeFaceNormals(),mesh=new THREE.Mesh(geometry,e)}if(1<svgDataPaths.length)svgGroup.add(mesh),offsetObjectsToCenter(),console.log("RUNNING offsetObjectsToCenter();");else if(svgDataPaths.length=1){function getCenterPoint(e){var t=e.geometry;t.computeBoundingBox();var o=new THREE.Vector3;return t.boundingBox.getCenter(o),e.localToWorld(o),o}const scaleLevel=-.005;mesh.scale.set(scaleLevel,scaleLevel,scaleLevel),mesh.scale.y*=-1,mesh.rotateX(180*(Math.PI/180)),mesh.rotateY(180*(Math.PI/180)),mesh.name="SVG_"+path.id+"_Extruded_Mesh",mesh.castShadow=!0,app.scene.add(mesh);let single_Empty=new v3d.Object3D;single_Empty.name="SVG_"+path.id+"_Extruded_Control",app.scene.add(single_Empty);let add_items_to_extrudeSessionID_ToEval=`window.LIST_${objInput.name}_Extruded_meshes.push(mesh.name);
                        window.LIST_${objInput.name}_Extruded_controls.push(single_Empty.name);`;eval(add_items_to_extrudeSessionID_ToEval),console.log("Extrude Geometry - svgGroup:",svgGroup),single_Empty.position.x=getCenterPoint(mesh).x*(-1*scaleLevel),single_Empty.position.y=getCenterPoint(mesh).y*scaleLevel,single_Empty.position.z=getCenterPoint(mesh).z*scaleLevel,single_Empty.attach(mesh),single_Empty.translateX(obj.svgSize.x*(-1*scaleLevel)),single_Empty.translateY(obj.svgSize.y*scaleLevel),single_Empty.translateZ(depthScaleInput/100/4),master_Empty.attach(single_Empty)}})})}("Object3D"!==objInput.type||"Group"!==objInput.type||"Mesh"!==objInput.type)&&(objInput=app.scene.getObjectByName(objInput),console.log("objInput: ",objInput));let extrudeSessionID_ToEval=`window.LIST_${objInput.name}_Extruded_meshes = [];
            window.LIST_${objInput.name}_Extruded_controls = [];`;console.log("Extrude Geometry - extrudeSessionID_ToEval:",extrudeSessionID_ToEval),eval(extrudeSessionID_ToEval);let master_Empty=new v3d.Object3D;master_Empty.name="SVG_"+objInput.name+"_Extruded_Master_Control",app.scene.add(master_Empty),-1!==objInput.children&&(console.log("objInput.children: ",objInput.children),objInput.children.forEach(e=>{extrudeObject(e)}))}const puzzleName="Extrude Geometry";let svgDataPaths;objInput&&"undefined"!=typeof objInput&&"<none>"!=objInput?mainFunction():console.log("[ GLIFTEK ]: The","Extrude Geometry","plugin puzzle is missing an input!")}.apply(null,arguments)}function EXTRUDE_OBJECTS(e,t){extrudeGeometry(e,1,t,!1,"<none>","<none>",!0,3,3,0,5)}function BUTTON_GLIFTEK(){addHTMLElement("button","button_GLIFTEK","TO",["CONTAINER"],!1),setHTMLElemAttribute("innerHTML","<img src = \"GLIFTEK_Logo_1000x130.svg\"\nalt = \"GLIFTEK_Logo\" width=\"200px\" height=\"26px\">","button_GLIFTEK",!1),setHTMLElemStyle("background","transparent","button_GLIFTEK",!1),setHTMLElemStyle("border","0","button_GLIFTEK",!1),BUTTONS_POINTER("button_GLIFTEK"),eventHTMLElem("pointerup","button_GLIFTEK",!1,function(){GLIFTEK_LOGO("./GLIFTEK_Logo_1000x130.svg")})}function BUTTON_VERGE_3D(){addHTMLElement("button","button_Verge3D","TO",["CONTAINER"],!1),setHTMLElemAttribute("innerHTML","<img src = \"Verge3D_Logo_1000x1000.svg\"\nalt = \"Verge3D_Logo\" width=\"70px\" height=\"70px\">","button_Verge3D",!1),setHTMLElemStyle("background","transparent","button_Verge3D",!1),setHTMLElemStyle("border","0","button_Verge3D",!1),BUTTONS_POINTER("button_Verge3D"),eventHTMLElem("pointerup","button_Verge3D",!1,function(){VERGE_3D_LOGO("./Verge3D_Logo_1000x1000.svg")})}function MAIN(){SETUP(),MAKE_BUTTONS()}function createGridHelper(){return function(t,o,r,n){(function(){function s(){const e=["raycast","5tuWcGE","525108BRPnXC","apply","11374WyurZW","6210ZIOwGo","gridHelperNumber","4zbhtZW","2961576fMhvbs","toString","scene","18eiDQTB","set","7824103IeAtQU","constructor","gridHelper_","undefined","(((.+)+)+)+$","name","176385tltiSU","866288AqlpgH","search","6584136KCxxGl"];return s=function(){return e},s()}function l(e,t){const o=s();return l=function(e){e-=375;let t=o[e];return t},l(e,t)}const a=l;(function(e,t){for(const o=l,r=e();;)try{const e=-parseInt(o(386))/1*(-parseInt(o(391))/2)+-parseInt(o(380))/3+-parseInt(o(392))/4*(parseInt(o(385))/5)+parseInt(o(383))/6+-parseInt(o(397))/7+-parseInt(o(381))/8*(parseInt(o(395))/9)+parseInt(o(389))/10*(parseInt(o(388))/11);if(e===t)break;else r.push(r.shift())}catch(e){r.push(r.shift())}})(s,656196);const d=function(){let e=!0;return function(t,o){const r=e?function(){const e=l;if(o){const r=o[e(387)](t,arguments);return o=null,r}}:function(){};return e=!1,r}}(),u=d(this,function(){const e=l;return u[e(393)]().search(e(378)).toString()[e(375)](u)[e(382)](e(378))});u(),typeof gridHelperNumber==a(377)?window[a(390)]=1:gridHelperNumber++;let i=new v3d.GridHelper(t,o,n,r);i[a(384)]=function(){},i.up[a(396)](0,0,1),i[a(379)]=a(376)+gridHelperNumber,app[a(394)].add(i)})()}.apply(null,arguments)}function createObject(e,t,o,r,n,a,i,s,l,d,u){var p=appInstance.scene.getObjectByName(t);p&&p.parent.remove(p);var c,m;switch(e){case"BOX":m=new v3d.BoxGeometry(o,r,n);break;case"CAMERA":var y=appInstance.container.offsetWidth/appInstance.container.offsetHeight;if("PERSPECTIVE"==l)c=new v3d.PerspectiveCamera(u,y,1,1e3);else{var o=u*y;c=new v3d.OrthographicCamera(-o/2,o/2,u/2,-u/2,-1e3,1e3)}c.lookAt(_pGlob.vec3Tmp.set(0,0,0));break;case"CIRCLE":m=new v3d.CircleGeometry(a,s);break;case"CONE":m=new v3d.ConeGeometry(a,r,s);break;case"CYLINDER":m=new v3d.CylinderGeometry(a,a,r,s);break;case"EMPTY":c=new v3d.Object3D;break;case"LIGHT":var g=16777215,_=.5;"AMBIENT"===d?c=new v3d.AmbientLight(g,_):"AREA"===d?(v3d.RectAreaLightUniformsLib.init(LTC_MAT_1,LTC_MAT_2),c=new v3d.RectAreaLight(g,_,1,1)):"DIRECTIONAL"===d?c=new v3d.DirectionalLight(g,_):"HEMISPHERE"===d?c=new v3d.HemisphereLight(g,0,_):"POINT"===d?c=new v3d.PointLight(g,_):"SPOT"===d?c=new v3d.SpotLight(g,_):void 0;c.isFreeLight=!0;break;case"PLANE":m=new v3d.PlaneGeometry(o,r,1,1);break;case"SPHERE":m=new v3d.SphereGeometry(a,32,32);break;case"TEAPOT":m=new v3d.TeapotGeometry(o);break;case"TORUS":m=new v3d.TorusGeometry(a,i,32,32);}if(m){var h=new v3d.MeshStandardMaterial({color:"white",roughness:1,metalness:0,side:"CIRCLE"==e||"PLANE"==e||"TEAPOT"==e?v3d.DoubleSide:v3d.FrontSide});h.name=t+"Material",c=new v3d.Mesh(m,h)}c.name=t,appInstance.scene.add(c),_pGlob.objCache={}}function RotationInterface(){this._userRotation=new v3d.Euler(0,0,0,"ZYX"),this._actualRotation=new v3d.Euler}function setObjTransform(e,t,o,r,n){function a(e,t,r){n?"scale"==o?e[o][t]*=r:e[o][t]+=r:e[o][t]=r}var s=r[0],l=r[1],d=r[2],u=retrieveObjectNames(e),p=_pGlob.vec3Tmp.set(+(""!==s),+(""!==l),+(""!==d)),c=_pGlob.vec3Tmp2.set(s||0,l||0,d||0);"rotation"===o&&c.multiplyScalar(v3d.MathUtils.DEG2RAD);var m=getCoordSystem();coordsTransform(p,m,"Y_UP_RIGHT",!0),coordsTransform(c,m,"Y_UP_RIGHT","scale"===o);for(var y,g=0;g<u.length;g++)if(y=u[g],y){var _=getObjectByName(y);if(_){if(t&&_.parent)_.matrixWorld.decomposeE(_.position,_.rotation,_.scale),p.x&&a(_,"x",c.x),p.y&&a(_,"y",c.y),p.z&&a(_,"z",c.z),_.matrixWorld.composeE(_.position,_.rotation,_.scale),_.matrix.multiplyMatrices(_pGlob.mat4Tmp.copy(_.parent.matrixWorld).invert(),_.matrixWorld),_.matrix.decompose(_.position,_.quaternion,_.scale);else if("rotation"===o&&"Z_UP_RIGHT"==m){var h=eulerV3DToBlenderShortest(_.rotation,_pGlob.eulerTmp);coordsTransform(h,m,"Y_UP_RIGHT"),p.x&&(h.x=n?h.x+c.x:c.x),p.y&&(h.y=n?h.y+c.y:c.y),p.z&&(h.z=n?h.z+c.z:c.z),h.order="YZX",h.reorder(_.rotation.order),_.rotation.copy(h)}else if("rotation"===o&&"Y_UP_RIGHT"==m){var T=RotationInterface.initObject(_),h=T.getUserRotation(_pGlob.eulerTmp);p.x&&(h.x=n?h.x+c.x:c.x),p.y&&(h.y=n?h.y+c.y:c.y),p.z&&(h.z=n?h.z+c.z:c.z),T.setUserRotation(h),T.getActualRotation(_.rotation)}else p.x&&a(_,"x",c.x),p.y&&a(_,"y",c.y),p.z&&a(_,"z",c.z);_.updateMatrixWorld(!0)}}}function matGetColors(e){var t=v3d.SceneUtils.getMaterialByName(appInstance,e);return t?t.isMeshNodeMaterial?Object.keys(t.nodeRGBMap):t.isMeshStandardMaterial?["color","emissive"]:[]:[]}function setMaterialColor(e,t,o,n,a,s){var l=matGetColors(e);if(!(0>l.indexOf(t))){if(s){var d=new v3d.Color(s);d.convertSRGBToLinear(),o=d.r,n=d.g,a=d.b}for(var u,p=v3d.SceneUtils.getMaterialsByName(appInstance,e),c=0;c<p.length;c++){if(u=p[c],u.isMeshNodeMaterial){var m=u.nodeRGBMap[t];u.nodeRGB[m].x=o,u.nodeRGB[m].y=n,u.nodeRGB[m].z=a}else u[t].r=o,u[t].g=n,u[t].b=a;u.needsUpdate=!0,null!==appInstance.scene&&u===appInstance.scene.worldMaterial&&appInstance.updateEnvironment(u)}}}function SETUP(){changeVis("Cube",!1),changeVis("Plane",!1),createGridHelper(10,10,"gray","white"),createObject("PLANE","Plane",10,10,0,0,0,0,"PERSPECTIVE","AMBIENT",0),setObjTransform("Plane",!1,"rotation",[90,"",""],!1),setObjTransform("Plane",!1,"position",["","",-.01],!1),setMaterialColor("PlaneMaterial","color",0,0,0,"#2F4F4F"),createObject("LIGHT","Ambient Light",0,0,0,0,0,0,"PERSPECTIVE","AMBIENT",0)}function acquireUniqueName(e,t){var o=e;if(t!==void 0)for(;!t(o);){var n=o.match(/^(.*?)(\d+)$/);n?o=n[1]+(parseInt(n[2],10)+1):o+="2"}return o}function matNameUsed(e){return null!==v3d.SceneUtils.getMaterialByName(appInstance,e)}function assignMat(e,t){var o=retrieveObjectNames(e);if(t){var r=v3d.SceneUtils.getMaterialByName(appInstance,t);if(r)for(var n,a=0;a<o.length;a++)if(n=o[a],n){var s=getObjectByName(n);if(s){var l=s.resolveMultiMaterial()[0],d=l.morphTargetInfluences,u=void 0!==d&&0<d.length;if(u){var p=r.clone();p.name=acquireUniqueName(r.name,function(e){return!matNameUsed(e)}),u&&(p.morphTargets=!0,void 0!==l.geometry.morphAttributes.normal&&(p.morphNormals=!0)),l.material=p}else l.material=r}}}}function getItemsFromExtrusion(){return function(objInput,typeDropdown){function mainFunction(){("Object3D"!==objInput.type||"Group"!==objInput.type||"Mesh"!==objInput.type)&&(objInput=app.scene.getObjectByName(objInput),console.log("objInput: ",objInput));const toEval=`result = window.LIST_${objInput.name}_Extruded_${typeDropdown}`;eval(toEval),console.log("Extrude Geometry - window.LIST_${objInput.name}_Extruded_Controls")}const puzzleName="Get Items From Extrusion";let result;return objInput?mainFunction():console.log("[ GLIFTEK ]: The","Get Items From Extrusion","plugin puzzle is missing an input!"),result}.apply(null,arguments)}function registerSetTimeout(e,t){window.setTimeout(t,1e3*e)}function VERGE_3D_LOGO(e){RESET_OBJECTS(),svgAsObjLoader(e,1,!1),registerSetTimeout(.5,function(){Current_SVG="Verge3D_Logo",EXTRUDE_OBJECTS("Verge3D_Logo",200),registerSetTimeout(.5,function(){Current_SVG_Extruded_Master_Control="SVG_Verge3D_Logo_Extruded_Master_Control",setObjTransform(Current_SVG_Extruded_Master_Control,!1,"position",["",.5,""],!1),SVG_Empty_Scale=.5,setObjTransform(Current_SVG_Extruded_Master_Control,!1,"scale",[SVG_Empty_Scale,SVG_Empty_Scale,SVG_Empty_Scale],!1),setObjTransform(Current_SVG_Extruded_Master_Control,!1,"position",[2,0,1.25],!1),Current_SVG_Scale=.0025,setObjTransform(Current_SVG,!1,"scale",[Current_SVG_Scale,Current_SVG_Scale,-Current_SVG_Scale],!1),setObjTransform(Current_SVG,!1,"position",[-2,"",1.25],!1),setObjTransform("SVG_fill_Extruded_Control",!1,"scale",["",.35,""],!1),assignMat("SVG_fill_Extruded_Mesh","PlaneMaterial"),changeVis("Plane",!0),LIST_Controls_From_Extrusion=getItemsFromExtrusion(Current_SVG,"controls"),LIST_Meshes_From_Extrusion=getItemsFromExtrusion(Current_SVG,"meshes"),ROTATE_OBJECT(Current_SVG_Extruded_Master_Control)})})}function BUTTONS_POINTER(e){eventHTMLElem("pointerover",e,!1,function(){setHTMLElemStyle("cursor","pointer",["CONTAINER"],!1)}),eventHTMLElem("pointerout",e,!1,function(){setHTMLElemStyle("cursor","default",["CONTAINER"],!1)})}function GLIFTEK_LOGO(e){RESET_OBJECTS(),svgAsObjLoader(e,1,!1),registerSetTimeout(.5,function(){Current_SVG="GLIFTEK_Logo",setObjTransform("GLIFTEK_Logo",!1,"position",["","",1.5],!1),setObjTransform("GLIFTEK_Logo",!1,"scale",[.0025,.0025,-.0025],!1),CHANGE_SVG_MESH(),EXTRUDE_OBJECTS(Current_SVG,30),registerSetTimeout(.5,function(){Current_SVG_Extruded_Master_Control="SVG_GLIFTEK_Logo_Extruded_Master_Control",setObjTransform(Current_SVG_Extruded_Master_Control,!1,"position",["","",.5],!1),changeVis("Plane",!0),LIST_Controls_From_Extrusion=getItemsFromExtrusion(Current_SVG,"controls"),LIST_Meshes_From_Extrusion=getItemsFromExtrusion(Current_SVG,"meshes"),ROTATE_OBJECT(Current_SVG_Extruded_Master_Control),ROTATE_SEPARATE_OBJECTS(LIST_Controls_From_Extrusion)})})}function copyMaterialFunction(){return function(e,t){function o(){"undefined"==typeof matCopiesNumber?window.matCopiesNumber=1:matCopiesNumber++,console.log("matCopiesNumber: ",matCopiesNumber),app.scene.traverse(function(t){t instanceof THREE.Mesh&&t.material.name==e&&(r=t.material)}),app.scene.traverse(function(e){e instanceof THREE.Mesh&&e.material.name==t&&(a=e,n=e.material)}),n=r.clone();if(n.name=r.name+"_Copy."+matCopiesNumber,n instanceof v3d.MeshNodeMaterial){if(console.log("material IS MeshNodeMaterial"),1===Object.keys(n.nodeTextures).length)for(let e in n.nodeTextures=Object.assign({},n.nodeTextures),n.nodeTextures){console.log("matOutputMat.nodeTextures[id]",n.nodeTextures[e]);let t=n.nodeTextures[e],o=t.clone();n.nodeTextures[e]=o,n.nodeTextures[e].needsUpdate=!0}if(1===Object.keys(n.nodeRGB).length){let e=n.nodeRGB[0],t=e.clone();n.nodeRGB[0]=t,console.log("matOutputMat.nodeRGB[0]",n.nodeRGB[0])}n.depthWrite=!0,n.needsUpdate=!0}"undefined"!=typeof a&&(a.material=n)}let r,n,a;e&&"<none>"!=e&&t&&"<none>"!=t?o():console.log("[ GLIFTEK ]: The ","Copy Material","plugin puzzle is missing an input!")}.apply(null,arguments)}function SET_CUBE_MATERIAL_COPIES(){createObject("PLANE","plane_1",2,2,0,0,0,0,"PERSPECTIVE","AMBIENT",0),createObject("PLANE","plane_2",2,2,0,0,0,0,"PERSPECTIVE","AMBIENT",0),copyMaterialFunction("cube_material","plane_1Material"),copyMaterialFunction("cube_material","plane_2Material"),changeVis("plane_1",!1),changeVis("plane_2",!1)}function makeParent(e,t){if(e){var o=getObjectByName(e);if(o){if(t&&"<none>"!==t){var r=getObjectByName(t);if(!r)return}else o.traverseAncestors(function(e){"Scene"==e.type&&(r=e)});var n=new v3d.Matrix4;n.copy(r.matrixWorld).invert(),n.multiply(o.matrixWorld),n.decompose(o.position,o.quaternion,o.scale),r.add(o),o.updateMatrixWorld(!0)}}}function CHANGE_SVG_MESH(){for(var e in createObject("EMPTY","GLIFTEK_Logo_Empty",0,0,0,0,0,0,"PERSPECTIVE","AMBIENT",0),LIST_SVG_Parts_Extruded)p=LIST_SVG_Parts_Extruded[e],makeParent(p,"GLIFTEK_Logo_Empty");setObjTransform("GLIFTEK_Logo_Empty",!1,"position",["","",1.5],!1)}function ROTATE_SEPARATE_OBJECTS(e){for(var t in e)m=e[t],ROTATE_OBJECT(m)}function tweenUpdateCb(){TWEEN.update()}function animateParam(e,t,o,r,n,a,i,s,l){var d="Linear"==r?TWEEN.Easing.Linear.None:TWEEN.Easing[r][n],u="number"!=typeof e;u||(e=[e],t=[t]);new TWEEN.Tween(e).to(t,1e3*o).easing(d).repeat(a).yoyo(i).onUpdate(function(e){_pGlob.animateParamUpdate=u?e:e[0],s()}).onComplete(function(){l()}).start()}function ROTATE_OBJECT(e){animateParam(0,359,10,"Linear","InOut",1/0,!1,function(){setObjTransform(e,!1,"rotation",["","",_pGlob.animateParamUpdate||0],!1)},function(){})}function OBJECT_ROTATION(){ROTATE_OBJECT(Current_SVG_Extruded_Master_Control),ROTATE_SEPARATE_OBJECTS(LIST_SVG_Parts_Extruded)}function getObjectByName(){return function(t){function o(t,n){const i=r();return o=function(e){e-=304;let t=i[e];return t},o(t,n)}function r(){const e=["search","32QAxyEc","1257192sksmlI","apply","scene","24zKqEcQ","Mesh","211981dWsPVl","12LlDcMJ","79256YcNkEB","1031750WuBEnx","12158530COHvMG","toString","227214ApJbiO","11HuMbAZ","getObjectByName","1052732JHcdhD","(((.+)+)+)+$"];return r=function(){return e},r()}const n=o;(function(t,r){for(const n=o,i=t();;)try{const e=-parseInt(n(308))/1*(parseInt(n(309))/2)+-parseInt(n(320))/3+-parseInt(n(316))/4+parseInt(n(310))/5+-parseInt(n(305))/6*(parseInt(n(307))/7)+-parseInt(n(319))/8*(-parseInt(n(313))/9)+-parseInt(n(311))/10*(-parseInt(n(314))/11);if(e===r)break;else i.push(i.shift())}catch(e){i.push(i.shift())}})(r,244272);const a=function(){let t=!0;return function(r,n){const a=t?function(){const e=o;if(n){const t=n[e(321)](r,arguments);return n=null,t}}:function(){};return t=!1,a}}(),e=a(this,function(){const t=o;return e.toString()[t(318)](t(317))[t(312)]().constructor(e)[t(318)](t(317))});e();let i;return i=t instanceof v3d[n(306)]?t:app[n(304)][n(315)](t),i}.apply(null,arguments)}function dictGet(e,t){if(e&&"object"==typeof e)return e[t]}function CHANGE_COLOR_OF_LETTERS(){GLIFTEK_Logo_Var=getObjectByName("GLIFTEK_Logo"),animateParam(0,.5,3,"Exponential","InOut",1/0,!0,function(){material_color=dictGet(dictGet(dictGet(GLIFTEK_Logo_Var,"children")[6],"material"),"color"),MAKE_DICT_color_rgb4(material_color,1,_pGlob.animateParamUpdate||0,_pGlob.animateParamUpdate||0)},function(){})}function dictSet(e,t,o){e&&"object"==typeof e&&(e[t]=o)}function MAKE_DICT_color_rgb4(e,t,o,r){dictSet(e,"r",t),dictSet(e,"g",o),dictSet(e,"b",r)}var app=appInstance;initOptions=initOptions||{},"fadeAnnotations"in initOptions&&(_pGlob.fadeAnnotations=initOptions.fadeAnnotations),this.procedures.INSTRUCTIONS=INSTRUCTIONS,this.procedures.BUTTON_UPLOAD=BUTTON_UPLOAD,this.procedures.FORM_URL=FORM_URL,this.procedures.BUTTON_RESET=BUTTON_RESET,this.procedures.MAKE_BUTTONS=MAKE_BUTTONS,this.procedures.UPLOAD_SVG=UPLOAD_SVG,this.procedures.CAMERA_CONSTRAINTS=CAMERA_CONSTRAINTS,this.procedures.RESET_OBJECTS=RESET_OBJECTS,this.procedures.EXTRUDE_OBJECTS=EXTRUDE_OBJECTS,this.procedures.BUTTON_GLIFTEK=BUTTON_GLIFTEK,this.procedures.BUTTON_VERGE_3D=BUTTON_VERGE_3D,this.procedures.MAIN=MAIN,this.procedures.SETUP=SETUP,this.procedures.VERGE_3D_LOGO=VERGE_3D_LOGO,this.procedures.BUTTONS_POINTER=BUTTONS_POINTER,this.procedures.GLIFTEK_LOGO=GLIFTEK_LOGO,this.procedures.SET_CUBE_MATERIAL_COPIES=SET_CUBE_MATERIAL_COPIES,this.procedures.CHANGE_SVG_MESH=CHANGE_SVG_MESH,this.procedures.ROTATE_SEPARATE_OBJECTS=ROTATE_SEPARATE_OBJECTS,this.procedures.ROTATE_OBJECT=ROTATE_OBJECT,this.procedures.OBJECT_ROTATION=OBJECT_ROTATION,this.procedures.CHANGE_COLOR_OF_LETTERS=CHANGE_COLOR_OF_LETTERS,this.procedures.MAKE_DICT_color_rgb4=MAKE_DICT_color_rgb4;var file,object_to_extrude,depth,element,input,object_to_rotate,material_color,r,g,b,LIST_SVG_Parts_Extruded,m,GLIFTEK_Logo_Var,Current_SVG,Current_SVG_Extruded_Master_Control,p,LIST_children_of_Gliftek_Logo,LIST_Meshes_From_Extrusion,LIST_Controls_From_Extrusion,q,SVG_Empty_Scale,Current_SVG_Scale,o,PROC={INSTRUCTIONS:INSTRUCTIONS,BUTTON_UPLOAD:BUTTON_UPLOAD,FORM_URL:FORM_URL,BUTTON_RESET:BUTTON_RESET,MAKE_BUTTONS:MAKE_BUTTONS,UPLOAD_SVG:UPLOAD_SVG,CAMERA_CONSTRAINTS:CAMERA_CONSTRAINTS,RESET_OBJECTS:RESET_OBJECTS,EXTRUDE_OBJECTS:EXTRUDE_OBJECTS,BUTTON_GLIFTEK:BUTTON_GLIFTEK,BUTTON_VERGE_3D:BUTTON_VERGE_3D,MAIN:MAIN,SETUP:SETUP,VERGE_3D_LOGO:VERGE_3D_LOGO,BUTTONS_POINTER:BUTTONS_POINTER,GLIFTEK_LOGO:GLIFTEK_LOGO,SET_CUBE_MATERIAL_COPIES:SET_CUBE_MATERIAL_COPIES,CHANGE_SVG_MESH:CHANGE_SVG_MESH,ROTATE_SEPARATE_OBJECTS:ROTATE_SEPARATE_OBJECTS,ROTATE_OBJECT:ROTATE_OBJECT,OBJECT_ROTATION:OBJECT_ROTATION,CHANGE_COLOR_OF_LETTERS:CHANGE_COLOR_OF_LETTERS,MAKE_DICT_color_rgb4:MAKE_DICT_color_rgb4},eulerV3DToBlenderShortest=function(){var e=new v3d.Euler,t=new v3d.Euler,o=new v3d.Vector3;return function(r,n){var a=e.copy(r).reorder("YZX"),i=t.copy(a).makeAlternative(),s=a.toVector3(o).lengthSq(),l=i.toVector3(o).lengthSq();return n.copy(s<l?a:i),coordsTransform(n,"Y_UP_RIGHT","Z_UP_RIGHT")}}();Object.assign(RotationInterface,{initObject:function(e){void 0===e.userData.v3d.puzzles&&(e.userData.v3d.puzzles={}),void 0===e.userData.v3d.puzzles.rotationInterface&&(e.userData.v3d.puzzles.rotationInterface=new RotationInterface);var t=e.userData.v3d.puzzles.rotationInterface;return t.updateFromObject(e),t}}),Object.assign(RotationInterface.prototype,{updateFromObject:function(e){this._actualRotation.equalsEps(e.rotation,1e-8)||(this._actualRotation.copy(e.rotation),this._updateUserRotFromActualRot())},getActualRotation:function(e){return e.copy(this._actualRotation)},setUserRotation:function(e){this._userRotation.set(e.x,e.y,e.z),this._updateActualRotFromUserRot()},getUserRotation:function(e){return e.copy(this._userRotation)},_updateUserRotFromActualRot:function(){var e=this._userRotation.order;this._userRotation.copy(this._actualRotation).reorder(e)},_updateActualRotFromUserRot:function(){var e=this._actualRotation.order;this._actualRotation.copy(this._userRotation).reorder(e)}});var _Group=function(){this._tweens={},this._tweensAddedDuringUpdate={}};_Group.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(o,a){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(o=void 0===o?TWEEN.now():o;0<n.length;){this._tweensAddedDuringUpdate={};for(var s,l=0;l<n.length;l++)s=this._tweens[n[l]],s&&!1===s.update(o)&&(s._isPlaying=!1,a||delete this._tweens[n[l]]);n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var TWEEN=new _Group;TWEEN.Group=_Group,TWEEN._nextId=0,TWEEN.nextId=function(){return TWEEN._nextId++},TWEEN.now="undefined"==typeof window&&"undefined"!=typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now.bind(window.performance):void 0===Date.now?function(){return new Date().getTime()}:Date.now,TWEEN.Tween=function(e,t){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=TWEEN.Easing.Linear.None,this._interpolationFunction=TWEEN.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||TWEEN,this._id=TWEEN.nextId()},TWEEN.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,t){return this._valuesEnd=e,void 0!==t&&(this._duration=t),this},start:function(e){for(var t in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0===e?TWEEN.now():"string"==typeof e?TWEEN.now()+parseFloat(e):e,this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],!1==this._valuesStart[t]instanceof Array&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var e=0,o=this._chainedTweens.length;e<o;e++)this._chainedTweens[e].stop()},group:function(e){return this._group=e,this},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(l){var t,d,p;if(l<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),d=(l-this._startTime)/this._duration,d=0===this._duration||1<d?1:d,p=this._easingFunction(d),this._valuesEnd)if(void 0!==this._valuesStart[t]){var c=this._valuesStart[t]||0,r=this._valuesEnd[t];r instanceof Array?this._object[t]=this._interpolationFunction(r,p):("string"==typeof r&&(r="+"===r.charAt(0)||"-"===r.charAt(0)?c+parseFloat(r):parseFloat(r)),"number"==typeof r&&(this._object[t]=c+(r-c)*p))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1!==d)return!0;if(0<this._repeat){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]+=parseFloat(this._valuesEnd[t])),this._yoyo){var m=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=m}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),this._startTime=void 0===this._repeatDelayTime?l+this._delayTime:l+this._repeatDelayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,y=this._chainedTweens.length;s<y;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}},TWEEN.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return 1>(e*=2)?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return 1>(e*=2)?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:1>(e*=2)?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return 1>(e*=2)?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:1>(e*=2)?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var o=2.5949095;return 1>(e*=2)?.5*(e*e*((o+1)*e-o)):.5*((e-=2)*e*((o+1)*e+o)+2)}},Bounce:{In:function(e){return 1-TWEEN.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return .5>e?.5*TWEEN.Easing.Bounce.In(2*e):.5*TWEEN.Easing.Bounce.Out(2*e-1)+.5}}},TWEEN.Interpolation={Linear:function(o,t){var n=o.length-1,e=n*t,i=Math.floor(e),r=TWEEN.Interpolation.Utils.Linear;return 0>t?r(o[0],o[1],e):1<t?r(o[n],o[n-1],n-e):r(o[i],o[n<i+1?n:i+1],e-i)},Bezier:function(o,t){for(var n=0,l=o.length-1,i=Math.pow,r=TWEEN.Interpolation.Utils.Bernstein,a=0;a<=l;a++)n+=i(1-t,l-a)*i(t,a)*o[a]*r(l,a);return n},CatmullRom:function(o,t){var n=o.length-1,e=n*t,s=Math.floor(e),l=TWEEN.Interpolation.Utils.CatmullRom;return o[0]===o[n]?(0>t&&(s=Math.floor(e=n*(1+t))),l(o[(s-1+n)%n],o[s],o[(s+1)%n],o[(s+2)%n],e-s)):0>t?o[0]-(l(o[0],o[0],o[1],o[1],-e)-o[0]):1<t?o[n]-(l(o[n],o[n],o[n-1],o[n-1],e-n)-o[n]):l(o[s?s-1:0],o[s],o[n<s+1?n:s+1],o[n<s+2?n:s+2],e-s)},Utils:{Linear:function(o,t,r){return(t-o)*r+o},Bernstein:function(o,t){var r=TWEEN.Interpolation.Utils.Factorial;return r(o)/r(t)/r(o-t)},Factorial:function(){var o=[1];return function(r){var t=1;if(o[r])return o[r];for(var a=r;1<a;a--)t*=a;return o[r]=t}}(),CatmullRom:function(l,t,n,e,i){var r=.5*(n-l),a=.5*(e-t),s=i*i;return(2*t-2*n+r+a)*(i*s)+(-3*t+3*n-2*r-a)*s+r*i+t}}},function(e){"function"==typeof define&&define.amd?define([],function(){return TWEEN}):"undefined"!=typeof module&&"object"==typeof exports?module.exports=TWEEN:void 0!==e&&(e.TWEEN=TWEEN)}(this),appInstance.renderCallbacks.push(tweenUpdateCb),v3d.PL.editorRenderCallbacks&&v3d.PL.editorRenderCallbacks.push([appInstance,tweenUpdateCb]),_pGlob.animateParamUpdate=0,MAIN(),"https://upload.wikimedia.org/wikipedia/commons/4/4f/SVG_Logo.svg","https://upload.wikimedia.org/wikipedia/commons/7/7b/Recycling_symbol.svg","<img src = \"Verge3D_Logo_1000x1000.svg\" alt = \"Verge3D_Logo\" width=\"100px\" height=\"100px\">"}})();