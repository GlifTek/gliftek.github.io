'use strict';(function(){var a='<none>',b={};b['objCache']={},b['fadeAnnotations']=!![],b['pickedObject']='',b['hoveredObject']='',b['mediaElements']={},b['loadedFile']='',b['states']=[],b['percentage']=0x0,b['openedFile']='',b['xrSessionAcquired']=![],b['xrSessionCallbacks']=[],b['screenCoords']=new v3d['Vector2'](),b['intervalTimers']={},b['AXIS_X']=new v3d['Vector3'](0x1,0x0,0x0),b['AXIS_Y']=new v3d['Vector3'](0x0,0x1,0x0),b['AXIS_Z']=new v3d['Vector3'](0x0,0x0,0x1),b['MIN_DRAG_SCALE']=0.001,b['SET_OBJ_ROT_EPS']=1e-8,b['vec2Tmp']=new v3d['Vector2'](),b['vec2Tmp2']=new v3d['Vector2'](),b['vec3Tmp']=new v3d['Vector3'](),b['vec3Tmp2']=new v3d['Vector3'](),b['vec3Tmp3']=new v3d['Vector3'](),b['vec3Tmp4']=new v3d['Vector3'](),b['eulerTmp']=new v3d['Euler'](),b['eulerTmp2']=new v3d['Euler'](),b['quatTmp']=new v3d['Quaternion'](),b['quatTmp2']=new v3d['Quaternion'](),b['colorTmp']=new v3d['Color'](),b['mat4Tmp']=new v3d['Matrix4'](),b['planeTmp']=new v3d['Plane'](),b['raycasterTmp']=new v3d['Raycaster']();var c=v3d['PL']=v3d['PL']||{};v3d['puzzles']=c,c['procedures']=c['procedures']||{},c['execInitPuzzles']=function(d){var e=null,f=null,g={};g['percentage']=0x0,g['output']={'initOptions':{'fadeAnnotations':!![],'useBkgTransp':![],'preserveDrawBuf':![],'useCompAssets':![],'useFullscreen':!![],'useCustomPreloader':![],'preloaderStartCb':function(){},'preloaderProgressCb':function(){},'preloaderEndCb':function(){}}},g['container']=d!==undefined&&'container'in d?d['container']:'';var h={};return g['output']['initOptions']['fadeAnnotations']=!![],g['output']['initOptions']['useBkgTransp']=!![],g['output']['initOptions']['preserveDrawBuf']=![],g['output']['initOptions']['useCompAssets']=![],g['output']['initOptions']['useFullscreen']=!![],g['output'];},c['init']=function(d,e){var f=d;e=e||{};'fadeAnnotations'in e&&(b['fadeAnnotations']=e['fadeAnnotations']);this['procedures']['MAIN']=L,this['procedures']['TEXT_READOUT']=R,this['procedures']['GET_SELECTED_OBJECT']=V,this['procedures']['SET_DICT_OBJECT_COLORS']=a0,this['procedures']['MOVE_OBJECTS_LOOP']=a1,this['procedures']['MOVE_OBJECTS']=ak,this['procedures']['CHANGE_COLORS']=ao,this['procedures']['UPDATE_READOUT2']=aq,this['procedures']['UPDATE_READOUT']=ar;var g={'MAIN':L,'TEXT_READOUT':R,'GET_SELECTED_OBJECT':V,'SET_DICT_OBJECT_COLORS':a0,'MOVE_OBJECTS_LOOP':a1,'MOVE_OBJECTS':ak,'CHANGE_COLORS':ao,'UPDATE_READOUT2':aq,'UPDATE_READOUT':ar},h,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;function z(){return function(as,at,au,av){aw();function aw(){typeof gridHelperNumber=='undefined'?window['gridHelperNumber']=0x1:gridHelperNumber++;;let ax=new v3d['GridHelper'](as,at,av,au);ax['raycast']=function(){},ax['up']['set'](0x0,0x0,0x1),ax['name']='gridHelper_'+gridHelperNumber,f['scene']['add'](ax);};}['apply'](null,arguments);}function A(as){return as['type']!=='AmbientLight'&&as['name']!==''&&!(as['isMesh']&&as['isMaterialGeneratedMesh'])&&!as['isAuxClippingMesh'];}function B(as){var at,au=b!==undefined;at=au?b['objCache'][as]:null;if(at&&at['name']===as)return at;return d['scene']['traverse'](function(av){!at&&A(av)&&av['name']==as&&(at=av,au&&(b['objCache'][as]=at));}),at;}function C(){var as=[];return d['scene']['traverse'](function(at){if(A(at))as['push'](at['name']);}),as;}function D(as){var at=[];return d['scene']['traverse'](function(au){if(A(au)){var av=au['groupNames'];if(!av)return;for(var aw=0x0;aw<av['length'];aw++){var ax=av[aw];ax==as&&at['push'](au['name']);}}}),at;}function E(as){var at=[];return F(as,at),at['filter'](function(au){return au;});}function F(as,at){if(typeof as=='string')at['push'](as);else{if(Array['isArray'](as)&&as[0x0]=='GROUP'){var au=D(as[0x1]);for(var av=0x0;av<au['length'];av++)at['push'](au[av]);}else{if(Array['isArray'](as)&&as[0x0]=='ALL_OBJECTS'){var au=C();for(var av=0x0;av<au['length'];av++)at['push'](au[av]);}else{if(Array['isArray'](as)){for(var av=0x0;av<as['length'];av++)F(as[av],at);}}}}}function G(as){if(as['isMesh'])return!![];for(var at=0x0;at<as['children']['length'];at++){var au=as['children'][at];if(au['isMesh']&&au['isMaterialGeneratedMesh'])return!![];}return![];}function H(as,at,au){if(!A(as))return;switch(at){case'ALL':if(au['indexOf'](as['name'])<0x0)au['push'](as['name']);break;case'ANNOTATION':if(as['isAnnotation']&&au['indexOf'](as['name'])<0x0)au['push'](as['name']);break;case'BONE':if(as['isBone']&&au['indexOf'](as['name'])<0x0)au['push'](as['name']);break;case'CAMERA':if(as['isCamera']&&au['indexOf'](as['name'])<0x0)au['push'](as['name']);break;case'EMPTY':if(!as['isAnnotationControl']&&!as['isBone']&&!as['isCamera']&&!as['isGroup']&&!as['isLine']&&!as['isLOD']&&!as['isLight']&&!G(as)&&!as['isPoints']&&!as['isScene']&&!as['isSprite']&&au['indexOf'](as['name'])<0x0)au['push'](as['name']);break;case'LIGHT':if(as['isLight']&&au['indexOf'](as['name'])<0x0)au['push'](as['name']);break;case'MESH':if(G(as)&&au['indexOf'](as['name'])<0x0)au['push'](as['name']);break;default:console['error']('getObjectsFrom:\x20Unknown\x20object\x20type:\x20'+at);break;}for(var av=0x0;av<as['children']['length'];av++){var aw=as['children'][av];H(aw,at,au);}}function I(as,at){var au=[],av=E(as);for(var aw=0x0;aw<av['length'];aw++){var ax=av[aw];if(!ax)continue;var ay=B(ax);if(!ay)continue;H(ay,at,au);}return au;}function J(){return function(as,at,au){const av='Create\x20Bounding\x20Box';!as?console['log']('[\x20GLIFTEK\x20]:\x20The',av,'plugin\x20puzzle\x20is\x20missing\x20an\x20input!'):aw();;function aw(){ax(as);function ax(az){if(!Array['isArray'](az))az=[az],ay(az);else Array['isArray'](az)&&ay(az);;};function ay(az){for(let aB=0x0;aB<az['length'];aB++){let aC=az[aB],aD;aC instanceof v3d['Object3D']?aD=aC:aD=f['scene']['getObjectByName'](aC);let aE=aD,aF=new v3d['Box3'](),aG=aE['name']+'_Box3';aF['name']=aG,aF['id']=aE['name'],aF['userData']={},aF['userData']['collision']=![],aF['userData']['previousObjectTouched']=null,aF['userData']['touchingObject']=null,aF['userData']['touchingObjects']=[],aE['geometry']['computeBoundingBox'](),aF['copy'](aE['geometry']['boundingBox'])['applyMatrix4'](aE['matrixWorld']);!window['LIST_Box3s']?(window['LIST_Box3s']=[],window['LIST_Box3s']['push'](aF)):window['LIST_Box3s']['push'](aF);;let aH;if(at==!![]){let aI=aF['name']+'_Helper';var aA=new v3d['Box3Helper'](aF,au);aA['raycast']=function(){},aA['name']=aI,f['scene']['add'](aA),aH=!![];};};};};}['apply'](null,arguments);}function K(as,at){var au=E(as);for(var av=0x0;av<au['length'];av++){var aw=au[av];if(!aw)continue;var ax=B(aw);if(!ax)continue;ax['visible']=at;}}function L(){z(0xa,0xa,'gray','black'),n=I(['GROUP','Cubes'],'ALL'),J(n,!![],'#00cccc');for(var as in n){x=n[as],K(String(x)+'_Box3_Helper',![]);}R(),a0(),V(),a1();}function M(as,at){var au=[];if(Array['isArray'](as)&&as[0x0]!='CONTAINER'&&as[0x0]!='WINDOW'&&as[0x0]!='DOCUMENT'&&as[0x0]!='BODY'&&as[0x0]!='QUERYSELECTOR'){for(var av=0x0;av<as['length'];av++)au['push'](N(as[av],at));}else au['push'](N(as,at));return au;}function N(as,at){var au;if(Array['isArray'](as)&&as[0x0]=='CONTAINER'){if(d!==null)au=d['container'];else{if(typeof _initGlob!=='undefined'){var as=_initGlob['container'];at?au=parent['document']['getElementById'](as):au=document['getElementById'](as);}}}else{if(Array['isArray'](as)&&as[0x0]=='WINDOW'){if(at)au=parent;else au=window;}else{if(Array['isArray'](as)&&as[0x0]=='DOCUMENT'){if(at)au=parent['document'];else au=document;}else{if(Array['isArray'](as)&&as[0x0]=='BODY'){if(at)au=parent['document']['body'];else au=document['body'];}else{if(Array['isArray'](as)&&as[0x0]=='QUERYSELECTOR'){if(at)au=parent['document']['querySelector'](as);else au=document['querySelector'](as);}else{if(at)au=parent['document']['getElementById'](as);else au=document['getElementById'](as);}}}}}return au;}function O(as,at,au,av,aw){var ax=aw?window['parent']:window,ay=ax['document']['createElement'](as);if(at!=='')ay['id']=at;var az=N(av,aw);if(az instanceof ax['Element'])switch(au){case'TO':az['appendChild'](ay);break;case'BEFORE':az['insertAdjacentElement']('beforebegin',ay);break;case'AFTER':az['insertAdjacentElement']('afterend',ay);break;}}function P(as,at,au,av){var aw=M(au,av);for(var ax=0x0;ax<aw['length'];ax++){var ay=aw[ax];if(!ay||!ay['style'])continue;ay['style'][as]=at;}}function Q(as,at,au,av){var aw=M(au,av);for(var ax=0x0;ax<aw['length'];ax++){var ay=aw[ax];if(!ay)continue;if(as==='style')ay['setAttribute'](as,at);else(as=='href'||as=='src')&&at instanceof Promise?at['then'](function(az){ay[as]=az;}):ay[as]=at;}}function R(){m='Drag\x20objects\x20to\x20touch.',O('div','readout_for_selected_object','TO',['CONTAINER'],![]),P('fontFamily','Arial','readout_for_selected_object',![]),P('zIndex','2','readout_for_selected_object',![]),P('color','white','readout_for_selected_object',![]),y='',O('div','readout_for_all_objects','TO',['CONTAINER'],![]),P('fontFamily','Arial','readout_for_all_objects',![]),P('zIndex','2','readout_for_all_objects',![]),P('color','white','readout_for_all_objects',![]),Q('innerHTML','Drag\x20objects\x20to\x20touch.','readout_for_all_objects',![]);}function S(as){d['ssaaOnPause']=as,d['disableRendering'](0x1);}function T(){d['enableRendering']();}function U(as,at,au,av){var aw=M(at,au);for(var ax=0x0;ax<aw['length'];ax++){var ay=aw[ax];if(!ay)continue;ay['addEventListener'](as,av);if(v3d['PL']['editorEventListeners'])v3d['PL']['editorEventListeners']['push']([ay,as,av]);}}function V(){S(![]),U('pointerdown',['CONTAINER'],![],function(as){T();}),U('pointerup',['CONTAINER'],![],function(as){K(String(o)+'_Box3_Helper',![]),o=null,S(![]);});}function W(as){var at=E(as);for(var au=0x0;au<at['length'];au++){var av=at[au];if(!av)continue;var aw=B(av);if(!aw)continue;aw=aw['resolveMultiMaterial']()[0x0];if(aw['material']&&typeof aw['material']['name']=='string')return aw['material']['name'];}return'';}function X(as){var at=v3d['SceneUtils']['getMaterialByName'](d,as);if(!at)return[];if(at['isMeshNodeMaterial'])return Object['keys'](at['nodeRGBMap']);else{if(at['isMeshStandardMaterial'])return['color','emissive'];else return[];}}function Y(as,at,au){var av=X(as);if(av['indexOf'](at)<0x0)return;var aw=v3d['SceneUtils']['getMaterialsByName'](d,as);if(aw['length']){var ax=aw[0x0],ay=b['colorTmp'];if(ax['isMeshNodeMaterial']){var az=ax['nodeRGBMap'][at];ay['r']=ax['nodeRGB'][az]['x'],ay['g']=ax['nodeRGB'][az]['y'],ay['b']=ax['nodeRGB'][az]['z'];}else ay['copy'](ax[at]);switch(au){case'R':case'G':case'B':return ay[au['toLowerCase']()];break;case'RGB':return ay['toArray']();break;case'CSS_HEX':case'CSS_RGB':ay['convertLinearToSRGB']();if(au=='CSS_HEX')return'#'+ay['getHexString']();else return ay['getStyle']();break;}}}function Z(as,at,au){if(as&&typeof as=='object')as[at]=au;}function a0(){s={};for(var as in n){u=n[as],Z(s,u,Y(W(u),'Principled\x20BSDF\x20Color','CSS_HEX'));}}function a1(){for(var as in n){p=n[as],ak(p);}}function a2(as,at,au,av){var aw=d['renderer']['domElement'];aw['addEventListener'](at,aA);if(v3d['PL']['editorEventListeners'])v3d['PL']['editorEventListeners']['push']([aw,at,aA]);if(at=='mousedown'){var ax=au?'touchstart':'touchend';aw['addEventListener'](ax,aA);if(v3d['PL']['editorEventListeners'])v3d['PL']['editorEventListeners']['push']([aw,ax,aA]);}else{if(at=='dblclick'){var ay=0x0;function aB(aC){var aD=new Date()['getTime'](),aE=aD-ay;if(aE<0x258&&aE>0x0){aA(aC),ay=0x0;return;}ay=new Date()['getTime']();}var ax=au?'touchstart':'touchend';aw['addEventListener'](ax,aB);if(v3d['PL']['editorEventListeners'])v3d['PL']['editorEventListeners']['push']([aw,ax,aB]);}}var az=new v3d['Raycaster']();function aA(aC){if(!d['getCamera']())return;aC['preventDefault']();var aD=0x0,aE=0x0;if(aC instanceof MouseEvent){if(av&&av['indexOf'](aC['button'])==-0x1)return;aD=aC['offsetX']/aw['clientWidth'],aE=aC['offsetY']/aw['clientHeight'];}else{if(aC instanceof TouchEvent){var aF=aw['getBoundingClientRect']();aD=(aC['changedTouches'][0x0]['clientX']-aF['left'])/aF['width'],aE=(aC['changedTouches'][0x0]['clientY']-aF['top'])/aF['height'];}}b['screenCoords']['x']=aD*0x2-0x1,b['screenCoords']['y']=-aE*0x2+0x1,az['setFromCamera'](b['screenCoords'],d['getCamera'](!![]));var aG=[];d['scene']['traverse'](function(aI){aG['push'](aI);});var aH=az['intersectObjects'](aG);as(aH,aC);}}function a3(as,at){if(!at)return![];for(var au=0x0;au<as['length'];au++){if(at==as[au])return!![];else{var av=B(as[au]);if(av&&av['type']=='Group')for(var aw=0x0;aw<av['children']['length'];aw++){if(at==av['children'][aw]['name'])return!![];}}}return![];}function a4(as){return as['isMesh']&&as['isMaterialGeneratedMesh']&&as['parent']?as['parent']['name']:as['name'];}function a5(as,at,au,av,aw,ax){b['objClickInfo']=b['objClickInfo']||[],b['objClickInfo']['push']({'objSelector':as,'callbacks':[aw,ax]}),a2(function(ay,az){var aA=![],aB=at?ay['length']:Math['min'](0x1,ay['length']);for(var aC=0x0;aC<aB;aC++){var aD=ay[aC]['object'],aE=a4(aD),aF=E(as);a3(aF,aE)&&(b['pickedObject']=aE,aA=!![],aw(az));}!aA&&(b['pickedObject']='',ax(az));},au?'dblclick':'mousedown',![],av);}function a6(){var as=d['scene'];return as&&'v3d'in as['userData']&&'coordSystem'in as['userData']['v3d']?as['userData']['v3d']['coordSystem']:'Z_UP_RIGHT';}function a7(as,at,au,av){if(at==au)return as;var aw=as['y'],ax=as['z'];if(at=='Z_UP_RIGHT'&&au=='Y_UP_RIGHT')as['y']=ax,as['z']=av?aw:-aw;else at=='Y_UP_RIGHT'&&au=='Z_UP_RIGHT'?(as['y']=av?ax:-ax,as['z']=aw):console['error']('coordsTransform:\x20Unsupported\x20coordinate\x20space');return as;}var a8=function(){var as=new v3d['Euler'](),at=new v3d['Euler'](),au=new v3d['Vector3']();return function(av,aw){var ax=as['copy'](av)['reorder']('YZX'),ay=at['copy'](ax)['makeAlternative'](),az=ax['toVector3'](au)['lengthSq'](),aA=ay['toVector3'](au)['lengthSq']();return aw['copy'](az<aA?ax:ay),a7(aw,'Y_UP_RIGHT','Z_UP_RIGHT');};}();function a9(as,at,au,av){var aw=b['vec2Tmp'],ax=b['raycasterTmp'];return aw['x']=at/d['getWidth']()*0x2-0x1,aw['y']=-(au/d['getHeight']())*0x2+0x1,ax['setFromCamera'](aw,d['getCamera'](!![])),ax['ray']['intersectPlane'](as,av);}b['dragMoveOrigins']={};function aa(as,at,au,av){var aw=d['getCamera']();if(!aw)return;if(!b['objDragOverInfoByBlock'])return;var ax=E(as),ay=b['objDragOverInfoByBlock'][av];if(!ay)return;var az=B(ay['draggedObjName']);if(!az)return;!(au in b['dragMoveOrigins'])&&(b['dragMoveOrigins'][au]=[]);var aA=b['dragMoveOrigins'][au],aB=ax['length']-aA['length'];for(var aC=0x0;aC<aB;aC++){aA['push'](new v3d['Vector3']());}for(var aC=0x0;aC<ax['length'];aC++){var aD=B(ax[aC]);if(!aD)continue;var aE=aA[aC];!ay['isMoved']&&aE['copy'](aD['position']);var aF=a6();if(at=='X'||at=='Y'||at=='Z'){if(aF=='Z_UP_RIGHT')var aG=at=='X'?b['AXIS_X']:at=='Y'?b['AXIS_Z']:b['AXIS_Y'],aH=at=='X'?'x':at=='Y'?'z':'y';else var aG=at=='X'?b['AXIS_X']:at=='Y'?b['AXIS_Y']:b['AXIS_Z'],aH=at=='X'?'x':at=='Y'?'y':'z';var aI=aw['getWorldDirection'](b['vec3Tmp']);aI['cross'](aG)['cross'](aG);var aJ=b['planeTmp']['setFromNormalAndCoplanarPoint'](aI,az['position']),aK=a9(aJ,ay['downX'],ay['downY'],b['vec3Tmp']),aL=a9(aJ,ay['currX'],ay['currY'],b['vec3Tmp2']);aK&&aL&&(aD['position'][aH]=aE[aH]+aL[aH]-aK[aH]);}else{if(at=='XY'||at=='XZ'||at=='YZ'){if(aF=='Z_UP_RIGHT')var aM=at=='XY'?b['AXIS_Y']:at=='XZ'?b['AXIS_Z']:b['AXIS_X'],aN=at=='XY'?'x':at=='XZ'?'x':'y',aO=at=='XY'?'z':at=='XZ'?'y':'z';else var aM=at=='XY'?b['AXIS_Z']:at=='XZ'?b['AXIS_Y']:b['AXIS_X'],aN=at=='XY'?'x':at=='XZ'?'x':'y',aO=at=='XY'?'y':at=='XZ'?'z':'z';var aJ=b['planeTmp']['setFromNormalAndCoplanarPoint'](aM,az['position']),aK=a9(aJ,ay['downX'],ay['downY'],b['vec3Tmp']),aL=a9(aJ,ay['currX'],ay['currY'],b['vec3Tmp2']);aK&&aL&&(aD['position'][aN]=aE[aN]+aL[aN]-aK[aN],aD['position'][aO]=aE[aO]+aL[aO]-aK[aO]);}else{if(at=='XYZ'){var aI=aw['getWorldDirection'](b['vec3Tmp']),aJ=b['planeTmp']['setFromNormalAndCoplanarPoint'](aI,az['position']),aK=a9(aJ,ay['downX'],ay['downY'],b['vec3Tmp']),aL=a9(aJ,ay['currX'],ay['currY'],b['vec3Tmp2']);aK&&aL&&aD['position']['addVectors'](aE,aL)['sub'](aK);}}}aD['updateMatrixWorld'](!![]);}}function ab(){return function(as){const at='Update\x20Bounding\x20Box';!as||as=='<none>'?console['log']('[\x20GLIFTEK\x20]:\x20The',at,'plugin\x20puzzle\x20is\x20missing\x20an\x20input!'):au();;function au(){av(as);function av(ax){if(!Array['isArray'](ax))ax=[ax],aw(ax);else Array['isArray'](ax)&&aw(ax);;};function aw(ax){for(let ay=0x0;ay<ax['length'];ay++){let az=ax[ay],aA;az instanceof v3d['Mesh']?aA=az:aA=f['scene']['getObjectByName'](az);let aB=aA['name']+'_Box3',aC;window['LIST_Box3s']['forEach'](aD=>{aD['name']==aB&&(aC=aD);}),aC['copy'](aA['geometry']['boundingBox'])['applyMatrix4'](aA['matrixWorld']);};};};}['apply'](null,arguments);}function ac(as,at,au){if(as instanceof MouseEvent)au['set'](as['offsetX'],as['offsetY']);else{if(window['TouchEvent']&&as instanceof TouchEvent){var av=as['target']['getBoundingClientRect'](),aw=as['touches'];(as['type']=='touchstart'||as['type']=='touchend'||as['type']=='touchmove')&&(aw=as['changedTouches']);var ax=aw[0x0];for(var ay=0x0;ay<aw['length'];ay++){if(aw[ay]['identifier']==at){ax=aw[ay];break;}}au['set'](ax['clientX']-av['left'],ax['clientY']-av['top']);}}return au;}function ad(as){if(as instanceof MouseEvent)return-0x1;else{if(window['TouchEvent']&&as instanceof TouchEvent)return as['type']=='touchstart'||as['type']=='touchend'||as['type']=='touchmove'?as['changedTouches'][0x0]['identifier']:as['touches'][0x0]['identifier'];}return-0x1;}function ae(as,at){if(window['TouchEvent']&&as instanceof TouchEvent){if(as['type']=='touchstart'||as['type']=='touchend'||as['type']=='touchmove'){var au=![];for(var av=0x0;av<as['changedTouches']['length'];av++){if(as['changedTouches'][av]['identifier']==at){au=!![];break;}}return au;}}return!![];}function af(){return{'draggedObjName':'','downX':0x0,'downY':0x0,'prevX':0x0,'prevY':0x0,'currX':0x0,'currY':0x0,'isDowned':![],'isMoved':![],'touchId':-0x1};}b['objDragOverInfoGlobal']=[],b['objDragOverInfoByBlock']={},a2(function(as,at){b['objDragOverInfoGlobal']['forEach'](function(au){if(at instanceof MouseEvent){if(au['mouseButtons']['indexOf'](at['button'])==-0x1)return;}var av=au['xRay']?as['length']:Math['min'](0x1,as['length']);for(var aw=0x0;aw<av;aw++){var ax=as[aw]['object'],ay=a4(ax);a3([au['objName']],ay)&&au['callback']({'downEvent':at,'draggedObjName':ay});}});},'mousedown',!![]);function ag(as,at,au,av,aw,ax,ay){var az=function(aD){d['controls']&&(d['controls']['enabled']=![]);!(ay in b['objDragOverInfoByBlock'])&&(b['objDragOverInfoByBlock'][ay]=af());var aE=b['objDragOverInfoByBlock'][ay];if(aE['isDowned'])return;var aF=ad(aD['downEvent']),aG=ac(aD['downEvent'],aF,b['vec2Tmp']);aE['downX']=aE['prevX']=aE['currX']=aG['x'],aE['downY']=aE['prevY']=aE['currY']=aG['y'],aE['touchId']=aF,aE['isDowned']=!![],aE['isMoved']=![],aE['draggedObjName']=aD['draggedObjName'],av(aD['downEvent']);var aH=d['container'],aI=function(aK){if(!ae(aK,aE['touchId']))return;var aL=ac(aK,aE['touchId'],b['vec2Tmp']);aE['prevX']=aE['currX'],aE['prevY']=aE['currY'],aE['currX']=aL['x'],aE['currY']=aL['y'],aw(aK),aE['isMoved']=!![];},aJ=function(aK){if(!ae(aK,aE['touchId']))return;var aL=ac(aK,aE['touchId'],b['vec2Tmp']);aE['currX']=aL['x'],aE['currY']=aL['y'],aE['prevX']=aE['currX'],aE['prevY']=aE['currY'],ax(aK),aE['isDowned']=![],aH['removeEventListener']('mousemove',aI),aH['removeEventListener']('touchmove',aI),aH['removeEventListener']('mouseup',aJ),aH['removeEventListener']('touchend',aJ),d['controls']&&(d['controls']['enabled']=!![]);};aH['addEventListener']('mousemove',aI),aH['addEventListener']('touchmove',aI),aH['addEventListener']('mouseup',aJ),aH['addEventListener']('touchend',aJ);},aA=E(as);for(var aB=0x0;aB<aA['length'];aB++){var aC=aA[aB];b['objDragOverInfoGlobal']['push']({'objName':aC,'callback':az,'xRay':at,'mouseButtons':au});}}function ah(){return function(as){const at='Get\x20Bounding\x20Box\x20Collision\x20State';let au,av,aw;!as?console['log']('[\x20GLIFTEK\x20]:\x20The',at,'plugin\x20puzzle\x20is\x20missing\x20an\x20input!'):ax();;function ax(){as instanceof v3d['Object3D']?au=as:au=f['scene']['getObjectByName'](as);let ay=au['name']+'_Box3';window['LIST_Box3s']['forEach'](az=>{az['name']==ay&&(aw=az['userData']['collision']);});};return aw;}['apply'](null,arguments);}function ai(){return function(as,at,au,av){const aw='Bounding\x20Box\x20Collision\x20Sensor';ax();function ax(){let ay=au,az=av,aA=![],aB=[],aC,aD,aE;as instanceof v3d['Object3D']?aC=as:aC=f['scene']['getObjectByName'](as);let aF=aC['name']+'_Box3';if(typeof window['LIST_Box3s']!=='undefined'){aG();function aG(){window['LIST_Box3s']['forEach'](aJ=>{let aK=f['scene']['getObjectByName'](aJ['id']);aJ['copy'](aK['geometry']['boundingBox'])['applyMatrix4'](aK['matrixWorld']),aJ['name']==aF&&(aD=aJ);});if(Array['isArray'](at))aE=at,at=null,aE['forEach'](aJ=>{if(aJ!==as){!aJ instanceof v3d['Mesh']&&(aJ=f['scene']['getObjectByName'](aJ));let aK=aJ+'_Box3';window['LIST_Box3s']['forEach'](aL=>{aL['name']==aK&&(aJ=aL,aB['push'](aJ));});};}),aH();else{let aJ=at+'_Box3';window['LIST_Box3s']['forEach'](aK=>{aK['name']==aJ&&(at=aK,aB['push'](at));}),aH();};};function aH(){for(let aJ=0x0;aJ<aB['length'];aJ++){let aK=aI(aJ);console['log']('result\x20from\x20LIST_otherObjsBox3\x20for\x20let\x20i:',aK);if(aK)break;};};function aI(aJ){console['log']('running\x20collisionSensorFunction');let aK=aB[aJ],aL=aD['intersectsBox'](aK);console['log']('DOES\x20',aD['name'],'\x20INTERSECT\x20WITH',aK['name'],'?:\x20',aL);if(aL==!![]){aA=!![],aD['userData']['collision']=!![],aD['userData']['touchingObject']=aK['id'];let aM=aD['userData']['touchingObjects'];aM['push'](aK['id']),console['log']('LIST_objInput_touchingObjects:\x20',aM),aD['userData']['previousObjectTouched']=aK['id'];let aN=aM['indexOf'](aK['id']);console['log']('indexOf_object_in_touchingObjects_list',aN);if(aN==-0x1)aM['push'](aK['id']);else aN>-0x1&&aM['splice'](aN,0x1);return aK['userData']['collision']=!![],aK['userData']['touchingObject']=aD['name']['slice'](0x0,-0x5),console['log']('result\x20from\x20collisionSensorFunction:',aA),console['log'](aD['name'],':\x20',aD),ay(),aA;}else aL==![]&&(aD['userData']['collision']=![],aD['userData']['touchingObject']=null,aK['userData']['collision']=![],aK['userData']['touchingObject']=null,console['log'](aD['name'],':\x20',aD),az());;};}else{if(typeof window['LIST_Box3s']=='undefined'){let aJ='[\x20GLIFTEK\x20]\x20Plugins\x20-\x20The\x20plugin\x20'+aw+'\x20needs\x20a\x20\x22Create\x20Bounding\x20Boxes\x22\x20plugin\x20used\x20somewhere\x20before\x20it.';alert(aJ),console['log'](aJ);}}};}['apply'](null,arguments);}function aj(as,at,au,av,aw){b['objMovementInfos']=b['objMovementInfos']||{};function ax(aA,aB,aC){if(b['objMovementInfos'][aA]){var aD=b['objMovementInfos'][aA];aD['prevPosX']=aB['position']['x'],aD['prevPosY']=aB['position']['y'],aD['prevPosZ']=aB['position']['z'],aD['prevRotX']=aB['rotation']['x'],aD['prevRotY']=aB['rotation']['y'],aD['prevRotZ']=aB['rotation']['z'],aD['prevScaX']=aB['scale']['x'],aD['prevScaY']=aB['scale']['y'],aD['prevScaZ']=aB['scale']['z'],aD['prevIsMoving']=aC;}else{var aD={'prevPosX':aB['position']['x'],'prevPosY':aB['position']['y'],'prevPosZ':aB['position']['z'],'prevRotX':aB['rotation']['x'],'prevRotY':aB['rotation']['y'],'prevRotZ':aB['rotation']['z'],'prevScaX':aB['scale']['x'],'prevScaY':aB['scale']['y'],'prevScaZ':aB['scale']['z'],'prevIsMoving':aC};b['objMovementInfos'][aA]=aD;}return aD;}function ay(aA,aB,aC){var aD=b['objMovementInfos'][aA]||ax(aA,aB,![]),aE=at*aC,aF=Math['abs'](aB['position']['x']-aD['prevPosX'])>aE||Math['abs'](aB['position']['y']-aD['prevPosY'])>aE||Math['abs'](aB['position']['z']-aD['prevPosZ'])>aE||Math['abs'](aB['rotation']['x']-aD['prevRotX'])>aE||Math['abs'](aB['rotation']['y']-aD['prevRotY'])>aE||Math['abs'](aB['rotation']['z']-aD['prevRotZ'])>aE||Math['abs'](aB['scale']['x']-aD['prevScaX'])>aE||Math['abs'](aB['scale']['y']-aD['prevScaY'])>aE||Math['abs'](aB['scale']['z']-aD['prevScaZ'])>aE;if(!aD['prevIsMoving']&&aF)au(aA),ax(aA,aB,!![]);else{if(aD['prevIsMoving']&&aF)av(aA),ax(aA,aB,!![]);else aD['prevIsMoving']&&!aF?(aw(aA),ax(aA,aB,![])):ax(aA,aB,![]);}}function az(aA){function aB(aC,aD){var aE=E(aA);for(var aF=0x0;aF<aE['length'];aF++){var aG=aE[aF],aH=B(aG);if(!aH)return;ay(aG,aH,aC);}}d['renderCallbacks']['push'](aB);if(v3d['PL']['editorRenderCallbacks'])v3d['PL']['editorRenderCallbacks']['push']([d,aB]);}az(as);}function ak(as){a5(as,![],![],[0x0,0x1,0x2],function(){o=as,K(String(o)+'_Box3_Helper',!![]);},function(){}),ag(as,![],[0x0,0x1,0x2],function(){},function(){aa(as,'XY','?1BsHS%9;#@DGTpiI_gD',']v@c60@wY6_Vi]C!3A]p'),ab(as);},function(){},']v@c60@wY6_Vi]C!3A]p'),aj(as,0.01,function(){console['log']('DOING\x20SENSOR');},function(){v=ah(as);;console['log']([as,'\x20collision\x20state:\x20',v]['join']('')),ai(as,n,function(){ao(),ar(v);},function(){ao(),ar(v);});},function(){});}function al(){return function(as){const at='Get\x20List\x20Of\x20All\x20Touching\x20or\x20Not\x20Touching\x20Objects';let au=[];av();function av(){if(typeof window['LIST_Box3s']!=='undefined')window['LIST_Box3s']['forEach'](aw=>{let ax=aw['userData']['collision'];if(as=='touching')ax==!![]&&(au['push'](aw['id']),console['log']('LIST_touching_or_not_objects\x20TOUCHING\x20after\x20push:',au));else as=='NOTtouching'&&(ax==![]&&(au['push'](aw['id']),console['log']('LIST_touching_or_not_objects\x20NOT\x20touching\x20after\x20push:',au)));});else{if(typeof window['LIST_Box3s']=='undefined'){let aw='[\x20GLIFTEK\x20]\x20Plugins\x20-\x20The\x20plugin\x20'+at+'\x20needs\x20a\x20\x22Create\x20Bounding\x20Boxes\x22\x20plugin\x20used\x20somewhere\x20before\x20it.';alert(aw),console['log'](aw);}}};return au;}['apply'](null,arguments);}function am(as,at,au,av,aw,ax){var ay=X(as);if(ay['indexOf'](at)<0x0)return;if(ax){var az=new v3d['Color'](ax);az['convertSRGBToLinear'](),au=az['r'],av=az['g'],aw=az['b'];}var aA=v3d['SceneUtils']['getMaterialsByName'](d,as);for(var aB=0x0;aB<aA['length'];aB++){var aC=aA[aB];if(aC['isMeshNodeMaterial']){var aD=aC['nodeRGBMap'][at];aC['nodeRGB'][aD]['x']=au,aC['nodeRGB'][aD]['y']=av,aC['nodeRGB'][aD]['z']=aw;}else aC[at]['r']=au,aC[at]['g']=av,aC[at]['b']=aw;aC['needsUpdate']=!![],d['scene']!==null&&(aC===d['scene']['worldMaterial']&&d['updateEnvironment'](aC));}}function an(as,at){if(as&&typeof as=='object')return as[at];}function ao(){var as=al('touching');for(var at in as){q=as[at],am(W(q),'Principled\x20BSDF\x20Color',0x0,0x0,0x0,'yellow');}var au=al('NOTtouching');for(var av in au){t=au[av],am(W(t),'Principled\x20BSDF\x20Color',0x0,0x0,0x0,an(s,t));}}function ap(){return function(as){const at='Get\x20Touching\x20Object';let au,av,aw;!as||as=='<none>'?console['log']('Get\x20Touching\x20Object\x20Puzzle\x20needs\x20an\x20object!'):ax();;function ax(){if(typeof window['LIST_Box3s']!=='undefined'){as instanceof v3d['Object3D']?au=as:au=f['scene']['getObjectByName'](as);let ay=au['name']+'_Box3';window['LIST_Box3s']['forEach'](az=>{az['name']==ay&&(aw=az['userData']['touchingObject']);});}else{if(typeof window['LIST_Box3s']=='undefined'){let az='[\x20GLIFTEK\x20]\x20Plugins\x20-\x20The\x20plugin\x20'+at+'\x20needs\x20a\x20\x22Create\x20Bounding\x20Boxes\x22\x20plugin\x20used\x20somewhere\x20before\x20it.';alert(az),console['log'](az);}}};return aw;}['apply'](null,arguments);}function aq(as){r=ap(o);;m=as?['Selected\x20object\x20',o,'\x20just\x20touched\x20',r]['join'](''):'Drag\x20objects\x20to\x20touch.',Q('innerHTML',m,'readout_for_selected_object',![]),w=al('touching'),y='All\x20touching\x20objects:\x20'+String(w),Q('innerHTML',y,'readout_for_all_objects',![]);}function ar(as){r=ap(o);;m=r!=null?['Selected\x20object\x20',o,'\x20just\x20touched\x20',r]['join'](''):'Drag\x20objects\x20to\x20touch.',Q('innerHTML',m,'readout_for_selected_object',![]),w=al('touching'),console['log']('All\x20touching\x20objects:\x20'+String(w)),y=w!=''?'All\x20touching\x20objects:\x20'+String(w):'',Q('innerHTML',y,'readout_for_all_objects',![]);}L();};}());