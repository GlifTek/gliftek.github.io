'use strict';(function(){var LIST_NONE="<none>",_pGlob={};_pGlob.objCache={},_pGlob.fadeAnnotations=!0,_pGlob.pickedObject="",_pGlob.hoveredObject="",_pGlob.mediaElements={},_pGlob.loadedFile="",_pGlob.states=[],_pGlob.percentage=0,_pGlob.openedFile="",_pGlob.xrSessionAcquired=!1,_pGlob.xrSessionCallbacks=[],_pGlob.screenCoords=new v3d.Vector2,_pGlob.intervalTimers={},_pGlob.AXIS_X=new v3d.Vector3(1,0,0),_pGlob.AXIS_Y=new v3d.Vector3(0,1,0),_pGlob.AXIS_Z=new v3d.Vector3(0,0,1),_pGlob.MIN_DRAG_SCALE=.001,_pGlob.SET_OBJ_ROT_EPS=1e-8,_pGlob.vec2Tmp=new v3d.Vector2,_pGlob.vec2Tmp2=new v3d.Vector2,_pGlob.vec3Tmp=new v3d.Vector3,_pGlob.vec3Tmp2=new v3d.Vector3,_pGlob.vec3Tmp3=new v3d.Vector3,_pGlob.vec3Tmp4=new v3d.Vector3,_pGlob.eulerTmp=new v3d.Euler,_pGlob.eulerTmp2=new v3d.Euler,_pGlob.quatTmp=new v3d.Quaternion,_pGlob.quatTmp2=new v3d.Quaternion,_pGlob.colorTmp=new v3d.Color,_pGlob.mat4Tmp=new v3d.Matrix4,_pGlob.planeTmp=new v3d.Plane,_pGlob.raycasterTmp=new v3d.Raycaster;var PL=v3d.PL=v3d.PL||{};v3d.puzzles=PL,PL.procedures=PL.procedures||{},PL.execInitPuzzles=function(a){var b={};b.percentage=0,b.output={initOptions:{fadeAnnotations:!0,useBkgTransp:!1,preserveDrawBuf:!1,useCompAssets:!1,useFullscreen:!0,useCustomPreloader:!1,preloaderStartCb:function(){},preloaderProgressCb:function(){},preloaderEndCb:function(){}}},b.container=void 0!==a&&"container"in a?a.container:"";return b.output.initOptions.fadeAnnotations=!0,b.output.initOptions.useBkgTransp=!0,b.output.initOptions.preserveDrawBuf=!1,b.output.initOptions.useCompAssets=!1,b.output.initOptions.useFullscreen=!1,b.output},PL.init=function(appInstance,initOptions){function MAIN(){FADE_FROM_BLACK(),cubeClicked=0,GRADIENT_BACKGROUND_TEAL()}function generateGradientBackground(){return function(a,b,c,d,e,f,g,h,i,j,k){(function(){function l(a,b){let c;return c="undefined"==typeof a||null==typeof a||""==a?b.substring(1):a.substring(1),c}const m=l(f,c),n=l(h,e);let o,p,q;const r=`%3Crect x='0' y='0' width='640' height='640' `;!0==b?(p=l(g,d),q=`
            %3Cstop offset='${j}' stop-color='%23${p}'/%3E
            `):!1==b&&(q=""),"gradientLinear"==a?o=`
            ${"\n        data:image/svg+xml,%3Csvg id='bg_gradient' data-name='bg_gradient' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='640' height='640' viewBox='0 0 640 640'%3E\n        "}%3Cdefs%3E%3ClinearGradient id='linear-gradient' x1='320' y1='0' x2='320' y2='640' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='${i}' stop-color='%23${m}'/%3E${q}%3Cstop offset='${k}' stop-color='%23${n}'/%3E%3C/linearGradient%3E%3C/defs%3E${r}fill='url(%23linear-gradient)'/%3E%3Cpath d='M639,1V639H1V1H639m1-1H0V640H640V0Z'/%3E%3C/svg%3E
            `:"gradientRadial"==a&&(o=`
            ${"\n        data:image/svg+xml,%3Csvg id='bg_gradient' data-name='bg_gradient' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='640' height='640' viewBox='0 0 640 640'%3E\n        "}%3Cdefs%3E%3CradialGradient id='radial-gradient' cx='320' cy='320' r='320' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='${i}' stop-color='%23${m}' /%3E${q}%3Cstop offset='${k}' stop-color='%23${n}' /%3E%3C/radialGradient%3E%3C/defs%3E${r}fill='url(%23radial-gradient)' /%3E%3Cpath d='M639,1V639H1V1H639m1-1H0V640H640V0Z' /%3E%3C/svg%3E
            `);let s=new THREE.TextureLoader().load(o);s.minFilter=THREE.LinearFilter,app.scene.background=s,app.scene.background.encoding=THREE.sRGBEncoding})()}.apply(null,arguments)}function GRADIENT_BACKGROUND_CENTER(){generateGradientBackground("gradientRadial",!1,"#ffff99","#b87132","#cc6600","","","",.5,.6,1)}function notIgnoredObj(a){return"AmbientLight"!==a.type&&""!==a.name&&!(a.isMesh&&a.isMaterialGeneratedMesh)&&!a.isAuxClippingMesh}function getObjectByName(a){var b,c=void 0!==_pGlob;return(b=_pGlob.objCache[a],b&&b.name===a)?b:(appInstance.scene.traverse(function(d){!b&&notIgnoredObj(d)&&d.name==a&&(b=d,c&&(_pGlob.objCache[a]=b))}),b)}function getAllObjectNames(){var a=[];return appInstance.scene.traverse(function(b){notIgnoredObj(b)&&a.push(b.name)}),a}function getObjectNamesByGroupName(a){var b=[];return appInstance.scene.traverse(function(c){if(notIgnoredObj(c)){var d=c.groupNames;if(!d)return;for(var e,f=0;f<d.length;f++)e=d[f],e==a&&b.push(c.name)}}),b}function retrieveObjectNames(a){var b=[];return retrieveObjectNamesAcc(a,b),b.filter(function(a){return a})}function retrieveObjectNamesAcc(a,b){if("string"==typeof a)b.push(a);else if(Array.isArray(a)&&"GROUP"==a[0])for(var c=getObjectNamesByGroupName(a[1]),d=0;d<c.length;d++)b.push(c[d]);else if(Array.isArray(a)&&"ALL_OBJECTS"==a[0])for(var c=getAllObjectNames(),d=0;d<c.length;d++)b.push(c[d]);else if(Array.isArray(a))for(var d=0;d<a.length;d++)retrieveObjectNamesAcc(a[d],b)}function initObjectPicking(a,b,c,d){function e(b){if(appInstance.getCamera()){b.preventDefault();var c=0,e=0;if(b instanceof MouseEvent){if(d&&-1==d.indexOf(b.button))return;c=b.offsetX/f.clientWidth,e=b.offsetY/f.clientHeight}else if(b instanceof TouchEvent){var g=f.getBoundingClientRect();c=(b.changedTouches[0].clientX-g.left)/g.width,e=(b.changedTouches[0].clientY-g.top)/g.height}_pGlob.screenCoords.x=2*c-1,_pGlob.screenCoords.y=2*-e+1,i.setFromCamera(_pGlob.screenCoords,appInstance.getCamera(!0));var h=[];appInstance.scene.traverse(function(a){h.push(a)});var j=i.intersectObjects(h);a(j,b)}}var f=appInstance.renderer.domElement;if(f.addEventListener(b,e),v3d.PL.editorEventListeners&&v3d.PL.editorEventListeners.push([f,b,e]),"mousedown"==b){var g=c?"touchstart":"touchend";f.addEventListener(g,e),v3d.PL.editorEventListeners&&v3d.PL.editorEventListeners.push([f,g,e])}else if("dblclick"==b){function a(a){var b=new Date().getTime(),c=b-h;return 600>c&&0<c?(e(a),void(h=0)):void(h=new Date().getTime())}var h=0,g=c?"touchstart":"touchend";f.addEventListener(g,a),v3d.PL.editorEventListeners&&v3d.PL.editorEventListeners.push([f,g,a])}var i=new v3d.Raycaster}function objectsIncludeObj(a,b){if(!b)return!1;for(var c=0;c<a.length;c++){if(b==a[c])return!0;var d=getObjectByName(a[c]);if(d&&"Group"==d.type)for(var e=0;e<d.children.length;e++)if(b==d.children[e].name)return!0}return!1}function getPickedObjectName(a){return a.isMesh&&a.isMaterialGeneratedMesh&&a.parent?a.parent.name:a.name}function registerOnClick(a,b,c,d,e,f){_pGlob.objClickInfo=_pGlob.objClickInfo||[],_pGlob.objClickInfo.push({objSelector:a,callbacks:[e,f]}),initObjectPicking(function(c,d){for(var g=!1,h=b?c.length:Math.min(1,c.length),j=0;j<h;j++){var k=c[j].object,l=getPickedObjectName(k),m=retrieveObjectNames(a);objectsIncludeObj(m,l)&&(_pGlob.pickedObject=l,g=!0,e(d))}g||(_pGlob.pickedObject="",f(d))},c?"dblclick":"mousedown",!1,d)}function CLICK_CUBE(){registerOnClick("Cube",!1,!1,[0,1,2],function(){FADE_IN_OUT()},function(){})}function GRADIENT_BACKGROUND_TEAL(){generateGradientBackground("gradientLinear",!1,"#000000","#b87132","#33ffff","TEAL","","",.5,.2,1)}function screenFade(){return function(screenFade_ID_Input,screenFade_Z_Index_Input,typeDropdown,screenFade_Pause_Input,screenFade_Duration_Input,colorInput_1_PICKER,colorInput_1_TEXT,delete_When_Done_Checkbox,whenDone_Statement_Input){function mainFunction(){function setColorFromInputs(a,b){let c;return"undefined"==typeof a||null==typeof a||""==a?(c=b,console.log(b,"supplied. using PICKER.")):(c=a,console.log(a,"supplied. using TEXT.")),c}function RGBA_from_color_input(a,b){if("transparent"==a||null==a||"undefined"==typeof a)return"rgba(0, 0, 0, 0)";else{computedColorDiv.style.color=a;let c=window.getComputedStyle(computedColorDiv).color;console.log("computedColor for: ",a,":",c);let d=c.length,e="rgba("+c.substring(4,d-1)+", "+b+")";return console.log("computedColor_RGBA for: ",a,":",e),e}}function getBGcolor(){"in"==typeDropdown?(screenFade_Div.style.backgroundColor="rgba(0,0,0,0)",console.log("screenFade_Div.style.backgroundColor:",screenFade_Div.style.backgroundColor)):"out"==typeDropdown&&(screenFade_Div.style.backgroundColor=screenFadeColor,console.log("screenFade_Div.style.backgroundColor:",screenFade_Div.style.backgroundColor))}function animateScreenFade(){function screenFadeDisplay(){"in"==typeDropdown?(screenFade_Div.style.display="block",console.log("screenFade_Div.style.display:",screenFade_Div.style.display),deleteWhenDone()):"out"==typeDropdown&&(screenFade_Div.style.display="none",console.log("screenFade_Div.style.display:",screenFade_Div.style.display),deleteWhenDone())}function deleteWhenDone(){!0==delete_When_Done_Checkbox&&screenFade_Div.remove()}const animationType="animation-screen-fade-"+typeDropdown+"-"+screenFade_ID_Input;screenFade_Div.style.animationName=animationType,console.log("screenFade_Div.style.animationName:",screenFade_Div.style.animationName),screenFade_Div.addEventListener("animationend",function(event){if(event.animationName==animationType);{screenFade_Div.removeEventListener("animationend",null),screenFadeDisplay();let screenFadeState=eval(`${screenFade_ID_Input}.faded = '${typeDropdown}';`);console.log("screenFadeState:",screenFadeState),whenDone_Statement_Input()}})}function setstyleVar(){return`
                #computedColorDiv-${screenFade_ID_Input}
                {
                    height: 0px;
                    width: 0px;
                    display: none;
                    z-index = -10;
                }

                .screenFade-${screenFade_ID_Input}
                {
                    display: block;
                    position: fixed;
                    z-index: ${screenFade_Z_Index_Input};
                    left: 0;
                    top: 0;
                    height: 100%;
                    width: 100%;
                    overflow: hidden;
                    pointer-events: none;

                    animation-duration: ${screenFade_Duration_Input}s;
                    animation-timing-function: ease-in-out;
                }


                @keyframes animation-screen-fade-in-${screenFade_ID_Input}
                {
                    from {
                        background-color: rgba(0,0,0,0);
                    }
                    to {
                        background-color: ${screenFadeColor};
                    }
                }


                @keyframes animation-screen-fade-out-${screenFade_ID_Input}
                {
                    from {
                        background-color: ${screenFadeColor};
                    }
                    to {
                        background-color: rgba(0,0,0,0);
                    }
                }

                `}const colorInput_1esc=setColorFromInputs(colorInput_1_TEXT,colorInput_1_PICKER);console.log("colorInput_1esc:",colorInput_1esc);let computedColorDiv=document.createElement("div");computedColorDiv.id="computedColorDiv-"+screenFade_ID_Input,document.body.appendChild(computedColorDiv);const screenFadeColor=RGBA_from_color_input(colorInput_1esc,1);console.log("screenFadeColor: ",screenFadeColor),computedColorDiv.remove();let styleVar=setstyleVar(),style=document.createElement("style");style.id="screenFade-"+screenFade_ID_Input,style.innerHTML=styleVar,document.head.appendChild(style);let screenFade_Div=document.createElement("div");screenFade_Div.id=screenFade_ID_Input,screenFade_Div.className="screenFade-"+screenFade_ID_Input,getBGcolor();const container=document.getElementById("v3d-container");container.appendChild(screenFade_Div),setTimeout(function(){animateScreenFade()},1e3*screenFade_Pause_Input)}const puzzleName="Print To Modal Card";eval(`window.${screenFade_ID_Input} = { faded: null };`),screenFade_ID_Input?mainFunction():console.log("[ GLIFTEK ]: The","Print To Modal Card","plugin puzzle is missing an input!")}.apply(null,arguments)}function FADE_FROM_BLACK(){screen_fade_color_2="#31626b",screenFade("screenFade_1",20,"out",2,1,"#000000","",!0,function(){CLICK_CUBE()}),offset_var=0}function setImageBackground(){return function(a){(function(){let b=new THREE.TextureLoader().load(a);b.minFilter=THREE.LinearFilter,app.scene.background=b,app.scene.background.encoding=THREE.sRGBEncoding})()}.apply(null,arguments)}function getElements(a,b){var c=[];if(Array.isArray(a)&&"CONTAINER"!=a[0]&&"WINDOW"!=a[0]&&"DOCUMENT"!=a[0]&&"BODY"!=a[0]&&"QUERYSELECTOR"!=a[0])for(var d=0;d<a.length;d++)c.push(getElement(a[d],b));else c.push(getElement(a,b));return c}function getElement(a,b){var c;if(!(Array.isArray(a)&&"CONTAINER"==a[0]))c=Array.isArray(a)&&"WINDOW"==a[0]?b?parent:window:Array.isArray(a)&&"DOCUMENT"==a[0]?b?parent.document:document:Array.isArray(a)&&"BODY"==a[0]?b?parent.document.body:document.body:Array.isArray(a)&&"QUERYSELECTOR"==a[0]?b?parent.document.querySelector(a):document.querySelector(a):b?parent.document.getElementById(a):document.getElementById(a);else if(null!==appInstance)c=appInstance.container;else if("undefined"!=typeof _initGlob){var a=_initGlob.container;c=b?parent.document.getElementById(a):document.getElementById(a)}return c}function removeHTMLElement(a,b){var c=getElement(a,b);c&&c.parentNode&&c.parentNode.removeChild(c)}function registerSetTimeout(a,b){window.setTimeout(b,1e3*a)}function FADE_IN_OUT(){0==cubeClicked?screenFade("screenFade_2",20,"in",0,.5,"#cc0000","black",!0,function(){SCREEN_VIGNETTE(),setImageBackground("./bg_clouds_godrays_01.jpg"),registerSetTimeout(.25,function(){removeHTMLElement("screenFade_2",!1)}),screenFade("screenFade_3",5,"out",.5,.5,"#cc0000","black",!0,function(){cubeClicked=1,CLICK_CUBE()})}):1==cubeClicked&&screenFade("screenFade_4",20,"in",0,.5,"#cc0000","black",!0,function(){GRADIENT_BACKGROUND_CENTER(),registerSetTimeout(.25,function(){removeHTMLElement("screenFade_4",!1)}),screenFade("screenFade_5",5,"out",.5,.5,"#cc0000","black",!0,function(){cubeClicked=2,CLICK_CUBE()})})}function screenVignette(){return function(a,b,c,d,e,f,g,h,i){a?function(){let j,k,l="50%";let m=document.createElement("div");m.id=a,m.className="screenVignette-Div-"+a;let n=document.createElement("img");n.id="screenVignette_Image-"+a,n.className="screenVignette_Image-"+a,n.src=`${`data:image/svg+xml,%3Csvg id='screenVignette_graident_SVG' data-name='screenVignette_graident_SVG' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' ${`preserveAspectRatio='xMidYMin meet' x='0' y='0'`} viewBox='0 0 ${k} ${k}' width='${j}' height='${j}'  %3E`}%3Cdefs%3E%3CradialGradient id='screenVignette_graident' cx='${l}' cy='${l}' r='${c}' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='${d}' stop-color='%23${"000000"}' stop-opacity='${e}' /%3E%3Cstop offset='${f}' stop-color='%23${"000000"}' stop-opacity='${g}' /%3E%3Cstop offset='${h}' stop-color='%23${"000000"}' stop-opacity='${i}' /%3E%3C/radialGradient%3E%3C/defs%3E${`%3Crect x='0' y='0' width='${"100%"}' height='${"100%"}' `} fill='url(%23screenVignette_graident)' /%3E%3C/svg%3E`,n.crossOrigin="anonymous",m.appendChild(n);const o=document.getElementById("v3d-container");o.appendChild(m);let p=function(){return`
                .screenVignette-Div-${a}
                {
                    display: block;
                    position: fixed;
                    z-index: ${b};
                    left: 0px;
                    top: 0px;
                    height: 100%;
                    width: 100%;
                    overflow: hidden;
                    pointer-events: none;

                }

                .screenVignette_Image-${a}
                {
                    left: 0px;
                    top: 0px;
                    height: 100%;
                    width: 100%;
                    border: none;

                    -webkit-user-select: none;
                    -ms-user-select: none;
                    user-select: none;
                }

                `}(),q=document.createElement("style");q.id="screenVignette-Styles-"+a,q.innerHTML=p,document.head.appendChild(q)}():console.log("[ GLIFTEK ]: The","Screen Vignette","plugin puzzle is missing an input!")}.apply(null,arguments)}function SCREEN_VIGNETTE(){screenVignette("screenVignette_1",30,"62%",0,0,.3,0,2,.98)}var app=appInstance;initOptions=initOptions||{},"fadeAnnotations"in initOptions&&(_pGlob.fadeAnnotations=initOptions.fadeAnnotations),this.procedures.MAIN=MAIN,this.procedures.GRADIENT_BACKGROUND_CENTER=GRADIENT_BACKGROUND_CENTER,this.procedures.CLICK_CUBE=CLICK_CUBE,this.procedures.GRADIENT_BACKGROUND_TEAL=GRADIENT_BACKGROUND_TEAL,this.procedures.FADE_FROM_BLACK=FADE_FROM_BLACK,this.procedures.FADE_IN_OUT=FADE_IN_OUT,this.procedures.SCREEN_VIGNETTE=SCREEN_VIGNETTE;var screen_fade_color_2,cubeClicked,offset_var,PROC={MAIN:MAIN,GRADIENT_BACKGROUND_CENTER:GRADIENT_BACKGROUND_CENTER,CLICK_CUBE:CLICK_CUBE,GRADIENT_BACKGROUND_TEAL:GRADIENT_BACKGROUND_TEAL,FADE_FROM_BLACK:FADE_FROM_BLACK,FADE_IN_OUT:FADE_IN_OUT,SCREEN_VIGNETTE:SCREEN_VIGNETTE};MAIN()}})();